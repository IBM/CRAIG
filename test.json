{
  "versions.tf": "##############################################################################\n# Terraform Providers\n##############################################################################\n\nterraform {\n  required_providers {\n    ibm = {\n      source  = \"IBM-Cloud/ibm\"\n      version = \"~>1.43.0\"\n    }\n  }\n  required_version = \">=1.3\"\n}\n\n##############################################################################\n",
  "main.tf": "##############################################################################\n# IBM Cloud Provider\n##############################################################################\n\nprovider \"ibm\" {\n  ibmcloud_api_key = var.ibmcloud_api_key\n  region           = \"us-south\"\n  ibmcloud_timeout = 60\n}\n\n#############################################################################\n",
  "variables.tf": "##############################################################################\n# Variables\n##############################################################################\n\nvariable \"ibmcloud_api_key\" {\n  description = \"The IBM Cloud platform API key needed to deploy IAM enabled resources.\"\n  type        = string\n  sensitive   = true\n}\n\nvariable \"slz_ssh_key_public_key\" {\n  description = \"Public SSH Key Value for Slz SSH Key\"\n  type        = string\n  sensitive   = true\n  default     = \"public-key\"\n}\n\n##############################################################################\n",
  "vpc.tf": "##############################################################################\n# Edge VPC\n##############################################################################\n\nresource \"ibm_is_vpc\" \"edge_vpc\" {\n  name                        = \"slz-edge-vpc\"\n  resource_group              = ibm_resource_group.slz_edge_rg.id\n  default_network_acl_name    = null\n  default_security_group_name = null\n  default_routing_table_name  = null\n  tags                        = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"edge_f5_zone_1_prefix\" {\n  name = \"slz-edge-f5-zone-1\"\n  vpc  = ibm_is_vpc.edge_vpc.id\n  zone = \"us-south-1\"\n  cidr = \"10.5.0.0/16\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"edge_f5_zone_2_prefix\" {\n  name = \"slz-edge-f5-zone-2\"\n  vpc  = ibm_is_vpc.edge_vpc.id\n  zone = \"us-south-2\"\n  cidr = \"10.6.0.0/16\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"edge_f5_zone_3_prefix\" {\n  name = \"slz-edge-f5-zone-3\"\n  vpc  = ibm_is_vpc.edge_vpc.id\n  zone = \"us-south-3\"\n  cidr = \"10.7.0.0/16\"\n}\n\nresource \"ibm_is_network_acl\" \"edge_edge_acl_acl\" {\n  name           = \"slz-edge-edge-acl-acl\"\n  vpc            = ibm_is_vpc.edge_vpc.id\n  resource_group = ibm_resource_group.slz_edge_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_network_acl_rule\" \"edge_edge_acl_acl_rule_allow_ibm_inbound\" {\n  network_acl = ibm_is_network_acl.edge_edge_acl_acl.id\n  action      = \"allow\"\n  destination = \"10.0.0.0/8\"\n  direction   = \"inbound\"\n  name        = \"allow-ibm-inbound\"\n  source      = \"161.26.0.0/16\"\n}\n\nresource \"ibm_is_network_acl_rule\" \"edge_edge_acl_acl_rule_allow_all_network_inbound\" {\n  network_acl = ibm_is_network_acl.edge_edge_acl_acl.id\n  action      = \"allow\"\n  destination = \"10.0.0.0/8\"\n  direction   = \"inbound\"\n  name        = \"allow-all-network-inbound\"\n  source      = \"10.0.0.0/8\"\n}\n\nresource \"ibm_is_network_acl_rule\" \"edge_edge_acl_acl_rule_allow_all_outbound\" {\n  network_acl = ibm_is_network_acl.edge_edge_acl_acl.id\n  action      = \"allow\"\n  destination = \"0.0.0.0/0\"\n  direction   = \"outbound\"\n  name        = \"allow-all-outbound\"\n  source      = \"0.0.0.0/0\"\n}\n\nresource \"ibm_is_network_acl\" \"edge_f5_external_acl_acl\" {\n  name           = \"slz-edge-f5-external-acl-acl\"\n  vpc            = ibm_is_vpc.edge_vpc.id\n  resource_group = ibm_resource_group.slz_edge_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_network_acl_rule\" \"edge_f5_external_acl_acl_rule_allow_ibm_inbound\" {\n  network_acl = ibm_is_network_acl.edge_f5_external_acl_acl.id\n  action      = \"allow\"\n  destination = \"10.0.0.0/8\"\n  direction   = \"inbound\"\n  name        = \"allow-ibm-inbound\"\n  source      = \"161.26.0.0/16\"\n}\n\nresource \"ibm_is_network_acl_rule\" \"edge_f5_external_acl_acl_rule_allow_all_network_inbound\" {\n  network_acl = ibm_is_network_acl.edge_f5_external_acl_acl.id\n  action      = \"allow\"\n  destination = \"10.0.0.0/8\"\n  direction   = \"inbound\"\n  name        = \"allow-all-network-inbound\"\n  source      = \"10.0.0.0/8\"\n}\n\nresource \"ibm_is_network_acl_rule\" \"edge_f5_external_acl_acl_rule_allow_all_outbound\" {\n  network_acl = ibm_is_network_acl.edge_f5_external_acl_acl.id\n  action      = \"allow\"\n  destination = \"0.0.0.0/0\"\n  direction   = \"outbound\"\n  name        = \"allow-all-outbound\"\n  source      = \"0.0.0.0/0\"\n}\n\nresource \"ibm_is_network_acl_rule\" \"edge_f5_external_acl_acl_rule_allow_f5_external_443_inbound\" {\n  network_acl = ibm_is_network_acl.edge_f5_external_acl_acl.id\n  action      = \"allow\"\n  destination = \"10.0.0.0/8\"\n  direction   = \"inbound\"\n  name        = \"allow-f5-external-443-inbound\"\n  source      = \"0.0.0.0/0\"\n\n  tcp {\n    port_min        = 443\n    port_max        = 443\n    source_port_min = null\n    source_port_max = null\n  }\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_bastion_zone_1\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-bastion-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.5.60.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_external_zone_1\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-external-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_f5_external_acl_acl.id\n  ipv4_cidr_block = \"10.5.40.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_management_zone_1\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-management-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.5.30.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_workload_zone_1\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-workload-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.5.50.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_vpe_zone_1\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-vpe-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.5.70.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_vpn_1_zone_1\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-vpn-1-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.5.10.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_vpn_2_zone_1\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-vpn-2-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.5.20.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_bastion_zone_2\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-bastion-zone-2\"\n  zone            = \"us-south-2\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.6.60.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_external_zone_2\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-external-zone-2\"\n  zone            = \"us-south-2\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_f5_external_acl_acl.id\n  ipv4_cidr_block = \"10.6.40.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_management_zone_2\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-management-zone-2\"\n  zone            = \"us-south-2\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.6.30.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_workload_zone_2\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-workload-zone-2\"\n  zone            = \"us-south-2\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.6.50.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_vpe_zone_2\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-vpe-zone-2\"\n  zone            = \"us-south-2\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.6.70.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_vpn_1_zone_2\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-vpn-1-zone-2\"\n  zone            = \"us-south-2\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.6.10.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_vpn_2_zone_2\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-vpn-2-zone-2\"\n  zone            = \"us-south-2\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.6.20.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_bastion_zone_3\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-bastion-zone-3\"\n  zone            = \"us-south-3\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.7.60.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_external_zone_3\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-external-zone-3\"\n  zone            = \"us-south-3\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_f5_external_acl_acl.id\n  ipv4_cidr_block = \"10.7.40.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_management_zone_3\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-management-zone-3\"\n  zone            = \"us-south-3\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.7.30.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_f5_workload_zone_3\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-f5-workload-zone-3\"\n  zone            = \"us-south-3\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.7.50.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_vpe_zone_3\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-vpe-zone-3\"\n  zone            = \"us-south-3\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.7.70.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_vpn_1_zone_3\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-vpn-1-zone-3\"\n  zone            = \"us-south-3\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.7.10.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"edge_vpn_2_zone_3\" {\n  vpc             = ibm_is_vpc.edge_vpc.id\n  name            = \"slz-edge-vpn-2-zone-3\"\n  zone            = \"us-south-3\"\n  resource_group  = ibm_resource_group.slz_edge_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.edge_edge_acl_acl.id\n  ipv4_cidr_block = \"10.7.20.0/24\"\n}\n\n##############################################################################\n\n##############################################################################\n# Management VPC\n##############################################################################\n\nresource \"ibm_is_vpc\" \"management_vpc\" {\n  name                        = \"slz-management-vpc\"\n  resource_group              = ibm_resource_group.slz_management_rg.id\n  default_network_acl_name    = null\n  default_security_group_name = null\n  default_routing_table_name  = null\n  tags                        = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vsi_zone_1_prefix\" {\n  name = \"slz-management-vsi-zone-1\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"us-south-1\"\n  cidr = \"10.10.10.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vsi_zone_2_prefix\" {\n  name = \"slz-management-vsi-zone-2\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"us-south-2\"\n  cidr = \"10.10.20.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vsi_zone_3_prefix\" {\n  name = \"slz-management-vsi-zone-3\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"us-south-3\"\n  cidr = \"10.10.30.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vpe_zone_1_prefix\" {\n  name = \"slz-management-vpe-zone-1\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"us-south-1\"\n  cidr = \"10.20.10.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vpe_zone_2_prefix\" {\n  name = \"slz-management-vpe-zone-2\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"us-south-2\"\n  cidr = \"10.20.20.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vpe_zone_3_prefix\" {\n  name = \"slz-management-vpe-zone-3\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"us-south-3\"\n  cidr = \"10.20.30.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vpn_zone_1_prefix\" {\n  name = \"slz-management-vpn-zone-1\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"us-south-1\"\n  cidr = \"10.30.10.0/24\"\n}\n\nresource \"ibm_is_network_acl\" \"management_management_acl\" {\n  name           = \"slz-management-management-acl\"\n  vpc            = ibm_is_vpc.management_vpc.id\n  resource_group = ibm_resource_group.slz_management_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_network_acl_rule\" \"management_management_acl_rule_allow_ibm_inbound\" {\n  network_acl = ibm_is_network_acl.management_management_acl.id\n  action      = \"allow\"\n  destination = \"10.0.0.0/8\"\n  direction   = \"inbound\"\n  name        = \"allow-ibm-inbound\"\n  source      = \"161.26.0.0/16\"\n}\n\nresource \"ibm_is_network_acl_rule\" \"management_management_acl_rule_allow_all_network_inbound\" {\n  network_acl = ibm_is_network_acl.management_management_acl.id\n  action      = \"allow\"\n  destination = \"10.0.0.0/8\"\n  direction   = \"inbound\"\n  name        = \"allow-all-network-inbound\"\n  source      = \"10.0.0.0/8\"\n}\n\nresource \"ibm_is_network_acl_rule\" \"management_management_acl_rule_allow_all_outbound\" {\n  network_acl = ibm_is_network_acl.management_management_acl.id\n  action      = \"allow\"\n  destination = \"0.0.0.0/0\"\n  direction   = \"outbound\"\n  name        = \"allow-all-outbound\"\n  source      = \"0.0.0.0/0\"\n}\n\nresource \"ibm_is_subnet\" \"management_vsi_zone_1\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"slz-management-vsi-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_management_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vsi_zone_1_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vpn_zone_1\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"slz-management-vpn-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_management_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vpn_zone_1_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vsi_zone_2\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"slz-management-vsi-zone-2\"\n  zone            = \"us-south-2\"\n  resource_group  = ibm_resource_group.slz_management_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vsi_zone_2_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vsi_zone_3\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"slz-management-vsi-zone-3\"\n  zone            = \"us-south-3\"\n  resource_group  = ibm_resource_group.slz_management_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vsi_zone_3_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vpe_zone_1\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"slz-management-vpe-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_management_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vpe_zone_1_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vpe_zone_2\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"slz-management-vpe-zone-2\"\n  zone            = \"us-south-2\"\n  resource_group  = ibm_resource_group.slz_management_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vpe_zone_2_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vpe_zone_3\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"slz-management-vpe-zone-3\"\n  zone            = \"us-south-3\"\n  resource_group  = ibm_resource_group.slz_management_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vpe_zone_3_prefix.cidr\n}\n\n##############################################################################\n\n##############################################################################\n# Workload VPC\n##############################################################################\n\nresource \"ibm_is_vpc\" \"workload_vpc\" {\n  name                        = \"slz-workload-vpc\"\n  resource_group              = ibm_resource_group.slz_workload_rg.id\n  default_network_acl_name    = null\n  default_security_group_name = null\n  default_routing_table_name  = null\n  tags                        = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"workload_vsi_zone_1_prefix\" {\n  name = \"slz-workload-vsi-zone-1\"\n  vpc  = ibm_is_vpc.workload_vpc.id\n  zone = \"us-south-1\"\n  cidr = \"10.40.10.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"workload_vsi_zone_2_prefix\" {\n  name = \"slz-workload-vsi-zone-2\"\n  vpc  = ibm_is_vpc.workload_vpc.id\n  zone = \"us-south-2\"\n  cidr = \"10.50.10.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"workload_vsi_zone_3_prefix\" {\n  name = \"slz-workload-vsi-zone-3\"\n  vpc  = ibm_is_vpc.workload_vpc.id\n  zone = \"us-south-3\"\n  cidr = \"10.60.10.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"workload_vpe_zone_1_prefix\" {\n  name = \"slz-workload-vpe-zone-1\"\n  vpc  = ibm_is_vpc.workload_vpc.id\n  zone = \"us-south-1\"\n  cidr = \"10.40.20.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"workload_vpe_zone_2_prefix\" {\n  name = \"slz-workload-vpe-zone-2\"\n  vpc  = ibm_is_vpc.workload_vpc.id\n  zone = \"us-south-2\"\n  cidr = \"10.50.20.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"workload_vpe_zone_3_prefix\" {\n  name = \"slz-workload-vpe-zone-3\"\n  vpc  = ibm_is_vpc.workload_vpc.id\n  zone = \"us-south-3\"\n  cidr = \"10.60.20.0/24\"\n}\n\nresource \"ibm_is_network_acl\" \"workload_workload_acl\" {\n  name           = \"slz-workload-workload-acl\"\n  vpc            = ibm_is_vpc.workload_vpc.id\n  resource_group = ibm_resource_group.slz_workload_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_network_acl_rule\" \"workload_workload_acl_rule_allow_ibm_inbound\" {\n  network_acl = ibm_is_network_acl.workload_workload_acl.id\n  action      = \"allow\"\n  destination = \"10.0.0.0/8\"\n  direction   = \"inbound\"\n  name        = \"allow-ibm-inbound\"\n  source      = \"161.26.0.0/16\"\n}\n\nresource \"ibm_is_network_acl_rule\" \"workload_workload_acl_rule_allow_all_network_inbound\" {\n  network_acl = ibm_is_network_acl.workload_workload_acl.id\n  action      = \"allow\"\n  destination = \"10.0.0.0/8\"\n  direction   = \"inbound\"\n  name        = \"allow-all-network-inbound\"\n  source      = \"10.0.0.0/8\"\n}\n\nresource \"ibm_is_network_acl_rule\" \"workload_workload_acl_rule_allow_all_outbound\" {\n  network_acl = ibm_is_network_acl.workload_workload_acl.id\n  action      = \"allow\"\n  destination = \"0.0.0.0/0\"\n  direction   = \"outbound\"\n  name        = \"allow-all-outbound\"\n  source      = \"0.0.0.0/0\"\n}\n\nresource \"ibm_is_subnet\" \"workload_vsi_zone_1\" {\n  vpc             = ibm_is_vpc.workload_vpc.id\n  name            = \"slz-workload-vsi-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_workload_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.workload_workload_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.workload_vsi_zone_1_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"workload_vsi_zone_2\" {\n  vpc             = ibm_is_vpc.workload_vpc.id\n  name            = \"slz-workload-vsi-zone-2\"\n  zone            = \"us-south-2\"\n  resource_group  = ibm_resource_group.slz_workload_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.workload_workload_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.workload_vsi_zone_2_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"workload_vsi_zone_3\" {\n  vpc             = ibm_is_vpc.workload_vpc.id\n  name            = \"slz-workload-vsi-zone-3\"\n  zone            = \"us-south-3\"\n  resource_group  = ibm_resource_group.slz_workload_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.workload_workload_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.workload_vsi_zone_3_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"workload_vpe_zone_1\" {\n  vpc             = ibm_is_vpc.workload_vpc.id\n  name            = \"slz-workload-vpe-zone-1\"\n  zone            = \"us-south-1\"\n  resource_group  = ibm_resource_group.slz_workload_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.workload_workload_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.workload_vpe_zone_1_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"workload_vpe_zone_2\" {\n  vpc             = ibm_is_vpc.workload_vpc.id\n  name            = \"slz-workload-vpe-zone-2\"\n  zone            = \"us-south-2\"\n  resource_group  = ibm_resource_group.slz_workload_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.workload_workload_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.workload_vpe_zone_2_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"workload_vpe_zone_3\" {\n  vpc             = ibm_is_vpc.workload_vpc.id\n  name            = \"slz-workload-vpe-zone-3\"\n  zone            = \"us-south-3\"\n  resource_group  = ibm_resource_group.slz_workload_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  network_acl     = ibm_is_network_acl.workload_workload_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.workload_vpe_zone_3_prefix.cidr\n}\n\n##############################################################################\n\n",
  "key_management.tf": "##############################################################################\n# Key Management Instance Slz Kms\n##############################################################################\n\nresource \"ibm_resource_instance\" \"slz_kms\" {\n  name              = \"slz-slz-kms\"\n  resource_group_id = ibm_resource_group.slz_service_rg.id\n  service           = \"kms\"\n  plan              = \"tiered-pricing\"\n  location          = \"us-south\"\n  tags              = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_iam_authorization_policy\" \"slz_kms_server_protect_policy\" {\n  source_service_name         = \"server-protect\"\n  target_service_name         = \"kms\"\n  target_resource_instance_id = ibm_resource_instance.slz_kms.guid\n  roles                       = [\"Reader\"]\n  description                 = \"Allow block storage volumes to be encrypted by Key Management instance.\"\n}\n\nresource \"ibm_iam_authorization_policy\" \"slz_kms_block_storage_policy\" {\n  source_service_name         = \"is\"\n  target_service_name         = \"kms\"\n  target_resource_instance_id = ibm_resource_instance.slz_kms.guid\n  roles                       = [\"Reader\", \"Authorization Delegator\"]\n  description                 = \"Allow block storage volumes to be encrypted by Key Management instance.\"\n  source_resource_type        = \"share\"\n}\n\nresource \"ibm_kms_key_rings\" \"slz_kms_slz_slz_ring_ring\" {\n  key_ring_id = \"slz-slz-kms-slz-slz-ring\"\n  instance_id = ibm_resource_instance.slz_kms.guid\n}\n\nresource \"ibm_kms_key\" \"slz_kms_slz_slz_key_key\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  key_name      = \"slz-slz-kms-slz-slz-key\"\n  standard_key  = false\n  key_ring_id   = ibm_kms_key_rings.slz_kms_slz_slz_ring_ring.key_ring_id\n  force_delete  = true\n  endpoint_type = \"public\"\n\n  depends_on = [\n    ibm_iam_authorization_policy.slz_kms_server_protect_policy,\n    ibm_iam_authorization_policy.slz_kms_block_storage_policy\n  ]\n}\n\nresource \"ibm_kms_key_policies\" \"slz_kms_slz_slz_key_key_policy\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  endpoint_type = \"public\"\n  key_id        = ibm_kms_key.slz_kms_slz_slz_key_key.key_id\n\n  rotation {\n    interval_month = 12\n  }\n\n  dual_auth_delete {\n    enabled = false\n  }\n}\n\nresource \"ibm_kms_key\" \"slz_kms_slz_atracker_key_key\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  key_name      = \"slz-slz-kms-slz-atracker-key\"\n  standard_key  = false\n  key_ring_id   = ibm_kms_key_rings.slz_kms_slz_slz_ring_ring.key_ring_id\n  force_delete  = true\n  endpoint_type = \"public\"\n\n  depends_on = [\n    ibm_iam_authorization_policy.slz_kms_server_protect_policy,\n    ibm_iam_authorization_policy.slz_kms_block_storage_policy\n  ]\n}\n\nresource \"ibm_kms_key_policies\" \"slz_kms_slz_atracker_key_key_policy\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  endpoint_type = \"public\"\n  key_id        = ibm_kms_key.slz_kms_slz_atracker_key_key.key_id\n\n  rotation {\n    interval_month = 12\n  }\n\n  dual_auth_delete {\n    enabled = false\n  }\n}\n\nresource \"ibm_kms_key\" \"slz_kms_slz_vsi_volume_key_key\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  key_name      = \"slz-slz-kms-slz-vsi-volume-key\"\n  standard_key  = false\n  key_ring_id   = ibm_kms_key_rings.slz_kms_slz_slz_ring_ring.key_ring_id\n  force_delete  = true\n  endpoint_type = \"public\"\n\n  depends_on = [\n    ibm_iam_authorization_policy.slz_kms_server_protect_policy,\n    ibm_iam_authorization_policy.slz_kms_block_storage_policy\n  ]\n}\n\nresource \"ibm_kms_key_policies\" \"slz_kms_slz_vsi_volume_key_key_policy\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  endpoint_type = \"public\"\n  key_id        = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.key_id\n\n  rotation {\n    interval_month = 12\n  }\n\n  dual_auth_delete {\n    enabled = false\n  }\n}\n\n##############################################################################\n\n",
  "object_storage.tf": "##############################################################################\n# Object Storage Instance Atracker Cos\n##############################################################################\n\nresource \"random_string\" \"atracker_cos_random_suffix\" {\n  length  = 8\n  special = false\n  upper   = false\n}\n\nresource \"ibm_resource_instance\" \"atracker_cos_object_storage\" {\n  name              = \"slz-atracker-cos-object-storage-${random_string.atracker_cos_random_suffix.result}\"\n  resource_group_id = ibm_resource_group.slz_service_rg.id\n  service           = \"cloud-object-storage\"\n  location          = \"global\"\n  plan              = \"standard\"\n  tags              = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_iam_authorization_policy\" \"atracker_cos_cos_to_slz_kms_kms_policy\" {\n  source_service_name         = \"cloud-object-storage\"\n  source_resource_instance_id = split(\":\", ibm_resource_instance.atracker_cos_object_storage.id)[7]\n  roles                       = [\"Reader\"]\n  description                 = \"Allow COS instance to read from KMS instance\"\n  target_service_name         = \"kms\"\n  target_resource_instance_id = ibm_resource_instance.slz_kms.guid\n}\n\nresource \"ibm_cos_bucket\" \"atracker_cos_object_storage_atracker_bucket_bucket\" {\n  bucket_name          = \"slz-atracker-cos-atracker-bucket-${random_string.atracker_cos_random_suffix.result}\"\n  resource_instance_id = ibm_resource_instance.atracker_cos_object_storage.id\n  storage_class        = \"standard\"\n  endpoint_type        = \"public\"\n  force_delete         = true\n  region_location      = \"us-south\"\n  key_protect          = ibm_kms_key.slz_kms_slz_atracker_key_key.crn\n\n  depends_on = [\n    ibm_iam_authorization_policy.atracker_cos_cos_to_slz_kms_kms_policy\n  ]\n}\n\nresource \"ibm_resource_key\" \"atracker_cos_object_storage_key_cos_bind_key\" {\n  name                 = \"slz-atracker-cos-key-cos-bind-key-${random_string.atracker_cos_random_suffix.result}\"\n  resource_instance_id = ibm_resource_instance.atracker_cos_object_storage.id\n  role                 = \"Writer\"\n  tags                 = [\"slz\",\"landing-zone\"]\n}\n\n##############################################################################\n\n##############################################################################\n# Object Storage Instance Cos\n##############################################################################\n\nresource \"random_string\" \"cos_random_suffix\" {\n  length  = 8\n  special = false\n  upper   = false\n}\n\nresource \"ibm_resource_instance\" \"cos_object_storage\" {\n  name              = \"slz-cos-object-storage-${random_string.cos_random_suffix.result}\"\n  resource_group_id = ibm_resource_group.slz_service_rg.id\n  service           = \"cloud-object-storage\"\n  location          = \"global\"\n  plan              = \"standard\"\n  tags              = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_iam_authorization_policy\" \"cos_cos_to_slz_kms_kms_policy\" {\n  source_service_name         = \"cloud-object-storage\"\n  source_resource_instance_id = split(\":\", ibm_resource_instance.cos_object_storage.id)[7]\n  roles                       = [\"Reader\"]\n  description                 = \"Allow COS instance to read from KMS instance\"\n  target_service_name         = \"kms\"\n  target_resource_instance_id = ibm_resource_instance.slz_kms.guid\n}\n\nresource \"ibm_cos_bucket\" \"cos_object_storage_management_bucket_bucket\" {\n  bucket_name          = \"slz-cos-management-bucket-${random_string.cos_random_suffix.result}\"\n  resource_instance_id = ibm_resource_instance.cos_object_storage.id\n  storage_class        = \"standard\"\n  endpoint_type        = \"public\"\n  force_delete         = true\n  region_location      = \"us-south\"\n  key_protect          = ibm_kms_key.slz_kms_slz_slz_key_key.crn\n\n  depends_on = [\n    ibm_iam_authorization_policy.cos_cos_to_slz_kms_kms_policy\n  ]\n}\n\nresource \"ibm_cos_bucket\" \"cos_object_storage_edge_bucket_bucket\" {\n  bucket_name          = \"slz-cos-edge-bucket-${random_string.cos_random_suffix.result}\"\n  resource_instance_id = ibm_resource_instance.cos_object_storage.id\n  storage_class        = \"standard\"\n  endpoint_type        = \"public\"\n  force_delete         = true\n  region_location      = \"us-south\"\n  key_protect          = ibm_kms_key.slz_kms_slz_slz_key_key.crn\n\n  depends_on = [\n    ibm_iam_authorization_policy.cos_cos_to_slz_kms_kms_policy\n  ]\n}\n\nresource \"ibm_cos_bucket\" \"cos_object_storage_workload_bucket_bucket\" {\n  bucket_name          = \"slz-cos-workload-bucket-${random_string.cos_random_suffix.result}\"\n  resource_instance_id = ibm_resource_instance.cos_object_storage.id\n  storage_class        = \"standard\"\n  endpoint_type        = \"public\"\n  force_delete         = true\n  region_location      = \"us-south\"\n  key_protect          = ibm_kms_key.slz_kms_slz_slz_key_key.crn\n\n  depends_on = [\n    ibm_iam_authorization_policy.cos_cos_to_slz_kms_kms_policy\n  ]\n}\n\n##############################################################################\n\n",
  "atracker.tf": "##############################################################################\n# Atracker Resources\n##############################################################################\n\nresource \"ibm_atracker_target\" \"slz_atracker_cos_target\" {\n  name        = \"slz-slz-atracker-cos\"\n  target_type = \"cloud_object_storage\"\n  region      = \"us-south\"\n\n  cos_endpoint {\n    endpoint   = \"s3.private.us-south.cloud-object-storage.appdomain.cloud\"\n    target_crn = ibm_resource_instance.atracker_cos_object_storage.id\n    bucket     = ibm_cos_bucket.atracker_cos_object_storage_atracker_bucket_bucket.bucket_name\n    api_key    = ibm_resource_key.atracker_cos_object_storage_key_cos_bind_key.credentials.apikey\n  }\n}\n\nresource \"ibm_atracker_route\" \"slz_atracker_cos_route\" {\n  name = \"slz-slz-atracker-cos-route\"\n\n  rules {\n    target_ids = [ibm_atracker_target.slz_atracker_cos_target.id]\n    locations  = [\"global\",\"us-south\"]\n  }\n}\n\n##############################################################################\n",
  "resource_groups.tf": "##############################################################################\n# Resource Groups\n##############################################################################\n\nresource \"ibm_resource_group\" \"slz_service_rg\" {\n  name = \"slz-slz-service-rg\"\n  tags = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_resource_group\" \"slz_management_rg\" {\n  name = \"slz-slz-management-rg\"\n  tags = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_resource_group\" \"slz_edge_rg\" {\n  name = \"slz-slz-edge-rg\"\n  tags = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_resource_group\" \"slz_workload_rg\" {\n  name = \"slz-slz-workload-rg\"\n  tags = [\"slz\",\"landing-zone\"]\n}\n\n##############################################################################\n",
  "flow_logs.tf": "##############################################################################\n# Flow Logs Resources\n##############################################################################\n\nresource \"ibm_iam_authorization_policy\" \"flow_logs_to_cos_object_storage_policy\" {\n  source_service_name         = \"is\"\n  source_resource_type        = \"flow-log-collector\"\n  description                 = \"Allow flow logs write access cloud object storage instance\"\n  roles                       = [\"Writer\"]\n  target_service_name         = \"cloud-object-storage\"\n  target_resource_instance_id = split(\":\", ibm_resource_instance.cos_object_storage.id)[7]\n}\n\nresource \"ibm_is_flow_log\" \"edge_flow_log_collector\" {\n  name           = \"slz-edge-vpc-logs\"\n  target         = ibm_is_vpc.edge_vpc.id\n  active         = true\n  storage_bucket = ibm_cos_bucket.cos_object_storage_edge_bucket_bucket.bucket_name\n  resource_group = ibm_resource_group.slz_edge_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n\n  depends_on = [\n    ibm_iam_authorization_policy.flow_logs_to_cos_object_storage_policy\n  ]\n}\n\nresource \"ibm_is_flow_log\" \"management_flow_log_collector\" {\n  name           = \"slz-management-vpc-logs\"\n  target         = ibm_is_vpc.management_vpc.id\n  active         = true\n  storage_bucket = ibm_cos_bucket.cos_object_storage_management_bucket_bucket.bucket_name\n  resource_group = ibm_resource_group.slz_management_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n\n  depends_on = [\n    ibm_iam_authorization_policy.flow_logs_to_cos_object_storage_policy\n  ]\n}\n\nresource \"ibm_is_flow_log\" \"workload_flow_log_collector\" {\n  name           = \"slz-workload-vpc-logs\"\n  target         = ibm_is_vpc.workload_vpc.id\n  active         = true\n  storage_bucket = ibm_cos_bucket.cos_object_storage_management_bucket_bucket.bucket_name\n  resource_group = ibm_resource_group.slz_workload_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n\n  depends_on = [\n    ibm_iam_authorization_policy.flow_logs_to_cos_object_storage_policy\n  ]\n}\n\n##############################################################################\n",
  "virtual_private_endpoints.tf": "##############################################################################\n# Management VPE Resources\n##############################################################################\n\nresource \"ibm_is_subnet_reserved_ip\" \"management_vpc_vpe_zone_1_subnet_vpe_ip\" {\n  subnet = ibm_is_subnet.management_vpe_zone_1.id\n}\n\nresource \"ibm_is_subnet_reserved_ip\" \"management_vpc_vpe_zone_2_subnet_vpe_ip\" {\n  subnet = ibm_is_subnet.management_vpe_zone_2.id\n}\n\nresource \"ibm_is_subnet_reserved_ip\" \"management_vpc_vpe_zone_3_subnet_vpe_ip\" {\n  subnet = ibm_is_subnet.management_vpe_zone_3.id\n}\n\nresource \"ibm_is_virtual_endpoint_gateway\" \"management_vpc_cos_vpe_gateway\" {\n  name            = \"slz-management-cos-vpe-gw\"\n  vpc             = ibm_is_vpc.management_vpc.id\n  resource_group  = ibm_resource_group.slz_management_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  security_groups = [\n    ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  ]\n\n  target {\n    crn           = \"crn:v1:bluemix:public:cloud-object-storage:global:::endpoint:s3.direct.us-south.cloud-object-storage.appdomain.cloud\"\n    resource_type = \"provider_cloud_service\"\n  }\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"management_vpc_cos_gw_vpe_zone_1_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.management_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.management_vpc_vpe_zone_1_subnet_vpe_ip.reserved_ip\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"management_vpc_cos_gw_vpe_zone_2_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.management_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.management_vpc_vpe_zone_2_subnet_vpe_ip.reserved_ip\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"management_vpc_cos_gw_vpe_zone_3_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.management_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.management_vpc_vpe_zone_3_subnet_vpe_ip.reserved_ip\n}\n\n##############################################################################\n\n##############################################################################\n# Workload VPE Resources\n##############################################################################\n\nresource \"ibm_is_subnet_reserved_ip\" \"workload_vpc_vpe_zone_1_subnet_vpe_ip\" {\n  subnet = ibm_is_subnet.workload_vpe_zone_1.id\n}\n\nresource \"ibm_is_subnet_reserved_ip\" \"workload_vpc_vpe_zone_2_subnet_vpe_ip\" {\n  subnet = ibm_is_subnet.workload_vpe_zone_2.id\n}\n\nresource \"ibm_is_subnet_reserved_ip\" \"workload_vpc_vpe_zone_3_subnet_vpe_ip\" {\n  subnet = ibm_is_subnet.workload_vpe_zone_3.id\n}\n\nresource \"ibm_is_virtual_endpoint_gateway\" \"workload_vpc_cos_vpe_gateway\" {\n  name            = \"slz-workload-cos-vpe-gw\"\n  vpc             = ibm_is_vpc.workload_vpc.id\n  resource_group  = ibm_resource_group.slz_workload_rg.id\n  tags            = [\"slz\",\"landing-zone\"]\n  security_groups = [\n    ibm_is_security_group.workload_vpc_workload_vpe_sg_sg.id\n  ]\n\n  target {\n    crn           = \"crn:v1:bluemix:public:cloud-object-storage:global:::endpoint:s3.direct.us-south.cloud-object-storage.appdomain.cloud\"\n    resource_type = \"provider_cloud_service\"\n  }\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"workload_vpc_cos_gw_vpe_zone_1_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.workload_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.workload_vpc_vpe_zone_1_subnet_vpe_ip.reserved_ip\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"workload_vpc_cos_gw_vpe_zone_2_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.workload_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.workload_vpc_vpe_zone_2_subnet_vpe_ip.reserved_ip\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"workload_vpc_cos_gw_vpe_zone_3_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.workload_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.workload_vpc_vpe_zone_3_subnet_vpe_ip.reserved_ip\n}\n\n##############################################################################\n",
  "security_groups.tf": "##############################################################################\n# Security Group F5 Management Sg\n##############################################################################\n\nresource \"ibm_is_security_group\" \"edge_vpc_f5_management_sg_sg\" {\n  name           = \"slz-edge-f5-management-sg-sg\"\n  vpc            = ibm_is_vpc.edge_vpc.id\n  resource_group = ibm_resource_group.slz_edge_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_management_sg_sg_rule_allow_ibm_inbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_management_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"inbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_management_sg_sg_rule_allow_vpc_inbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_management_sg_sg.id\n  remote    = \"10.0.0.0/8\"\n  direction = \"inbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_management_sg_sg_rule_allow_vpc_outbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_management_sg_sg.id\n  remote    = \"10.0.0.0/8\"\n  direction = \"outbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_management_sg_sg_rule_allow_ibm_tcp_53_outbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_management_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 53\n    port_max = 53\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_management_sg_sg_rule_allow_ibm_tcp_80_outbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_management_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 80\n    port_max = 80\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_management_sg_sg_rule_allow_ibm_tcp_443_outbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_management_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\n##############################################################################\n\n##############################################################################\n# Security Group F5 External Sg\n##############################################################################\n\nresource \"ibm_is_security_group\" \"edge_vpc_f5_external_sg_sg\" {\n  name           = \"slz-edge-f5-external-sg-sg\"\n  vpc            = ibm_is_vpc.edge_vpc.id\n  resource_group = ibm_resource_group.slz_edge_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_external_sg_sg_rule_allow_inbound_443\" {\n  group     = ibm_is_security_group.edge_vpc_f5_external_sg_sg.id\n  remote    = \"0.0.0.0/0\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\n##############################################################################\n\n##############################################################################\n# Security Group F5 Bastion Sg\n##############################################################################\n\nresource \"ibm_is_security_group\" \"edge_vpc_f5_bastion_sg_sg\" {\n  name           = \"slz-edge-f5-bastion-sg-sg\"\n  vpc            = ibm_is_vpc.edge_vpc.id\n  resource_group = ibm_resource_group.slz_edge_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_bastion_sg_sg_rule_1_inbound_3023\" {\n  group     = ibm_is_security_group.edge_vpc_f5_bastion_sg_sg.id\n  remote    = \"10.5.80.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 3023\n    port_max = 3025\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_bastion_sg_sg_rule_1_inbound_3080\" {\n  group     = ibm_is_security_group.edge_vpc_f5_bastion_sg_sg.id\n  remote    = \"10.5.80.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 3080\n    port_max = 3080\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_bastion_sg_sg_rule_2_inbound_3023\" {\n  group     = ibm_is_security_group.edge_vpc_f5_bastion_sg_sg.id\n  remote    = \"10.6.80.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 3023\n    port_max = 3025\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_bastion_sg_sg_rule_2_inbound_3080\" {\n  group     = ibm_is_security_group.edge_vpc_f5_bastion_sg_sg.id\n  remote    = \"10.6.80.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 3080\n    port_max = 3080\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_bastion_sg_sg_rule_3_inbound_3023\" {\n  group     = ibm_is_security_group.edge_vpc_f5_bastion_sg_sg.id\n  remote    = \"10.7.80.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 3023\n    port_max = 3025\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_bastion_sg_sg_rule_3_inbound_3080\" {\n  group     = ibm_is_security_group.edge_vpc_f5_bastion_sg_sg.id\n  remote    = \"10.7.80.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 3080\n    port_max = 3080\n  }\n}\n\n##############################################################################\n\n##############################################################################\n# Security Group F5 Workload Sg\n##############################################################################\n\nresource \"ibm_is_security_group\" \"edge_vpc_f5_workload_sg_sg\" {\n  name           = \"slz-edge-f5-workload-sg-sg\"\n  vpc            = ibm_is_vpc.edge_vpc.id\n  resource_group = ibm_resource_group.slz_edge_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_workload_subnet_1\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"10.10.10.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_workload_subnet_2\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"10.20.10.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_workload_subnet_3\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"10.30.10.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_workload_subnet_4\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"10.40.10.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_workload_subnet_5\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"10.50.10.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_workload_subnet_6\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"10.60.10.0/24\"\n  direction = \"inbound\"\n\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_ibm_inbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"inbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_vpc_inbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"10.0.0.0/8\"\n  direction = \"inbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_vpc_outbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"10.0.0.0/8\"\n  direction = \"outbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_ibm_tcp_53_outbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 53\n    port_max = 53\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_ibm_tcp_80_outbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 80\n    port_max = 80\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"edge_vpc_f5_workload_sg_sg_rule_allow_ibm_tcp_443_outbound\" {\n  group     = ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\n##############################################################################\n\n##############################################################################\n# Security Group Management VPE Sg\n##############################################################################\n\nresource \"ibm_is_security_group\" \"management_vpc_management_vpe_sg_sg\" {\n  name           = \"slz-management-management-vpe-sg-sg\"\n  vpc            = ibm_is_vpc.management_vpc.id\n  resource_group = ibm_resource_group.slz_management_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_ibm_inbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"inbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_vpc_inbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"10.0.0.0/8\"\n  direction = \"inbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_vpc_outbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"10.0.0.0/8\"\n  direction = \"outbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_ibm_tcp_53_outbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 53\n    port_max = 53\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_ibm_tcp_80_outbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 80\n    port_max = 80\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_ibm_tcp_443_outbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\n##############################################################################\n\n##############################################################################\n# Security Group Workload VPE Sg\n##############################################################################\n\nresource \"ibm_is_security_group\" \"workload_vpc_workload_vpe_sg_sg\" {\n  name           = \"slz-workload-workload-vpe-sg-sg\"\n  vpc            = ibm_is_vpc.workload_vpc.id\n  resource_group = ibm_resource_group.slz_workload_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n}\n\nresource \"ibm_is_security_group_rule\" \"workload_vpc_workload_vpe_sg_sg_rule_allow_ibm_inbound\" {\n  group     = ibm_is_security_group.workload_vpc_workload_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"inbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"workload_vpc_workload_vpe_sg_sg_rule_allow_vpc_inbound\" {\n  group     = ibm_is_security_group.workload_vpc_workload_vpe_sg_sg.id\n  remote    = \"10.0.0.0/8\"\n  direction = \"inbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"workload_vpc_workload_vpe_sg_sg_rule_allow_vpc_outbound\" {\n  group     = ibm_is_security_group.workload_vpc_workload_vpe_sg_sg.id\n  remote    = \"10.0.0.0/8\"\n  direction = \"outbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"workload_vpc_workload_vpe_sg_sg_rule_allow_ibm_tcp_53_outbound\" {\n  group     = ibm_is_security_group.workload_vpc_workload_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 53\n    port_max = 53\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"workload_vpc_workload_vpe_sg_sg_rule_allow_ibm_tcp_80_outbound\" {\n  group     = ibm_is_security_group.workload_vpc_workload_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 80\n    port_max = 80\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"workload_vpc_workload_vpe_sg_sg_rule_allow_ibm_tcp_443_outbound\" {\n  group     = ibm_is_security_group.workload_vpc_workload_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\n##############################################################################\n",
  "vpn_gateways.tf": "##############################################################################\n# VPN Gateways\n##############################################################################\n\nresource \"ibm_is_vpn_gateway\" \"management_management_gateway_vpn_gw\" {\n  name           = \"slz-management-management-gateway-vpn-gw\"\n  subnet         = ibm_is_subnet.management_vpn_zone_1.id\n  resource_group = ibm_resource_group.slz_management_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n\n  timeouts {\n    delete = \"1h\"\n  }\n}\n\n##############################################################################\n",
  "ssh_keys.tf": "##############################################################################\n# SSH Keys\n##############################################################################\n\nresource \"ibm_is_ssh_key\" \"slz_ssh_key\" {\n  name           = \"slz-slz-ssh-key\"\n  public_key     = var.slz_ssh_key_public_key\n  resource_group = ibm_resource_group.slz_management_rg.id\n  tags           = [\"slz\",\"landing-zone\"]\n}\n\n##############################################################################\n",
  "transit_gateways.tf": "##############################################################################\n# Transit Gateway Transit Gateway\n##############################################################################\n\nresource \"ibm_tg_gateway\" \"transit_gateway\" {\n  name           = \"slz-transit-gateway\"\n  location       = \"us-south\"\n  global         = false\n  resource_group = ibm_resource_group.slz_service_rg.id\n\n  timeouts {\n    create = \"30m\"\n    delete = \"30m\"\n  }\n}\n\nresource \"ibm_tg_connection\" \"transit_gateway_to_management_connection\" {\n  gateway      = ibm_tg_gateway.transit_gateway.id\n  network_type = \"vpc\"\n  name         = \"slz-transit-gateway-management-hub-connection\"\n  network_id   = ibm_is_vpc.management_vpc.crn\n\n  timeouts {\n    create = \"30m\"\n    delete = \"30m\"\n  }\n}\n\nresource \"ibm_tg_connection\" \"transit_gateway_to_workload_connection\" {\n  gateway      = ibm_tg_gateway.transit_gateway.id\n  network_type = \"vpc\"\n  name         = \"slz-transit-gateway-workload-hub-connection\"\n  network_id   = ibm_is_vpc.workload_vpc.crn\n\n  timeouts {\n    create = \"30m\"\n    delete = \"30m\"\n  }\n}\n\n##############################################################################\n",
  "clusters.tf": "##############################################################################\n# Workload Cluster Cluster\n##############################################################################\n\nresource \"ibm_container_vpc_cluster\" \"workload_vpc_workload_cluster_cluster\" {\n  name                            = \"slz-workload-cluster-cluster\"\n  vpc_id                          = ibm_is_vpc.workload_vpc.id\n  resource_group_id               = ibm_resource_group.slz_workload_rg.id\n  flavor                          = \"bx2.16x64\"\n  worker_count                    = 2\n  kube_version                    = \"default\"\n  update_all_workers              = null\n  tags                            = [\"slz\",\"landing-zone\"]\n  wait_till                       = \"IngressReady\"\n  disable_public_service_endpoint = false\n  entitlement                     = \"cloud_pak\"\n  cos_instance_crn                = ibm_resource_instance.cos_object_storage.crn\n\n  zones {\n    name      = \"us-south-1\"\n    subnet_id = ibm_is_subnet.workload_vsi_zone_1.id\n  }\n\n  zones {\n    name      = \"us-south-2\"\n    subnet_id = ibm_is_subnet.workload_vsi_zone_2.id\n  }\n\n  zones {\n    name      = \"us-south-3\"\n    subnet_id = ibm_is_subnet.workload_vsi_zone_3.id\n  }\n\n  kms_config {\n    crk_id           = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.key_id\n    instance_id      = ibm_resource_instance.slz_kms.guid\n    private_endpoint = false\n  }\n\n  timeouts {\n    create = \"3h\"\n    delete = \"2h\"\n    update = \"3h\"\n  }\n}\n\nresource \"ibm_container_vpc_worker_pool\" \"workload_vpc_workload_cluster_cluster_logging_pool_pool\" {\n  worker_pool_name  = \"slz-workload-cluster-cluster-logging-pool\"\n  vpc_id            = ibm_is_vpc.workload_vpc.id\n  resource_group_id = ibm_resource_group.slz_workload_rg.id\n  cluster           = ibm_container_vpc_cluster.workload_vpc_workload_cluster_cluster.id\n  flavor            = \"bx2.16x64\"\n  worker_count      = 2\n  entitlement       = \"cloud_pak\"\n\n  zones {\n    name      = \"us-south-1\"\n    subnet_id = ibm_is_subnet.workload_vsi_zone_1.id\n  }\n\n  zones {\n    name      = \"us-south-2\"\n    subnet_id = ibm_is_subnet.workload_vsi_zone_2.id\n  }\n\n  zones {\n    name      = \"us-south-3\"\n    subnet_id = ibm_is_subnet.workload_vsi_zone_3.id\n  }\n}\n\n##############################################################################\n",
  "virtual_servers.tf": "##############################################################################\n# Image Data Sources\n##############################################################################\n\ndata \"ibm_is_image\" \"ibm_ubuntu_18_04_6_minimal_amd64_2\" {\n  name = \"ibm-ubuntu-18-04-6-minimal-amd64-2\"\n}\n\n##############################################################################\n\n##############################################################################\n# Management VPC Management Server Deployment\n##############################################################################\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_1_1\" {\n  name           = \"slz-management-management-server-vsi-zone-1-1\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = ibm_is_vpc.management_vpc.id\n  zone           = \"us-south-1\"\n  tags           = [\"slz\",\"landing-zone\"]\n\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n\n  primary_network_interface {\n    subnet          = ibm_is_subnet.management_vsi_zone_1.id\n    security_groups = [\n      ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n    ]\n  }\n\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.key_id\n  }\n}\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_1_2\" {\n  name           = \"slz-management-management-server-vsi-zone-1-2\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = ibm_is_vpc.management_vpc.id\n  zone           = \"us-south-1\"\n  tags           = [\"slz\",\"landing-zone\"]\n\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n\n  primary_network_interface {\n    subnet          = ibm_is_subnet.management_vsi_zone_1.id\n    security_groups = [\n      ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n    ]\n  }\n\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.key_id\n  }\n}\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_2_1\" {\n  name           = \"slz-management-management-server-vsi-zone-2-1\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = ibm_is_vpc.management_vpc.id\n  zone           = \"us-south-2\"\n  tags           = [\"slz\",\"landing-zone\"]\n\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n\n  primary_network_interface {\n    subnet          = ibm_is_subnet.management_vsi_zone_2.id\n    security_groups = [\n      ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n    ]\n  }\n\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.key_id\n  }\n}\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_2_2\" {\n  name           = \"slz-management-management-server-vsi-zone-2-2\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = ibm_is_vpc.management_vpc.id\n  zone           = \"us-south-2\"\n  tags           = [\"slz\",\"landing-zone\"]\n\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n\n  primary_network_interface {\n    subnet          = ibm_is_subnet.management_vsi_zone_2.id\n    security_groups = [\n      ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n    ]\n  }\n\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.key_id\n  }\n}\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_3_1\" {\n  name           = \"slz-management-management-server-vsi-zone-3-1\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = ibm_is_vpc.management_vpc.id\n  zone           = \"us-south-3\"\n  tags           = [\"slz\",\"landing-zone\"]\n\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n\n  primary_network_interface {\n    subnet          = ibm_is_subnet.management_vsi_zone_3.id\n    security_groups = [\n      ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n    ]\n  }\n\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.key_id\n  }\n}\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_3_2\" {\n  name           = \"slz-management-management-server-vsi-zone-3-2\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = ibm_is_vpc.management_vpc.id\n  zone           = \"us-south-3\"\n  tags           = [\"slz\",\"landing-zone\"]\n\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n\n  primary_network_interface {\n    subnet          = ibm_is_subnet.management_vsi_zone_3.id\n    security_groups = [\n      ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n    ]\n  }\n\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.key_id\n  }\n}\n\n##############################################################################\n",
  "secrets_manager.tf": null,
  "appid.tf": null,
  "teleport_vsi.tf": null,
  "cloud-init.tpl": null,
  "scc.tf": null,
  "event_streams.tf": null,
  "load_balancers.tf": null,
  "f5_big_ip.tf": "##############################################################################\n# F5 Image IDs\n##############################################################################\n\nlocals {\n  # use the public image if the name is found\n  # List of public images found in F5 schematics documentation\n  # (https://github.com/f5devcentral/ibmcloud_schematics_bigip_multinic_public_images)\n  public_image_map = {\n    f5-bigip-15-1-5-1-0-0-14-all-1slot = {\n      \"eu-de\"    = \"r010-b14deae9-43fd-4850-b89d-5d6485d61acb\"\n      \"jp-tok\"   = \"r022-cfdb6280-c200-4261-af3a-a8d44bbd18ba\"\n      \"br-sao\"   = \"r042-3915f0e3-aadc-4fc9-95a8-840f8cb163de\"\n      \"au-syd\"   = \"r026-ed57accf-b3d4-4ca9-a6a6-e0a63ee1aba4\"\n      \"us-south\" = \"r006-c9f07041-bb56-4492-b25c-5f407ebea358\"\n      \"eu-gb\"    = \"r018-6dce329f-a6eb-4146-ba3e-5560afc84aa1\"\n      \"jp-osa\"   = \"r034-4ecc10ff-3dc7-42fb-9cae-189fb559dd61\"\n      \"us-east\"  = \"r014-87371e4c-3645-4579-857c-7e02fe5e9ff4\"\n      \"ca-tor\"   = \"r038-0840034f-5d05-4a6d-bdae-123628f1d323\"\n    }\n    f5-bigip-15-1-5-1-0-0-14-ltm-1slot = {\n      \"eu-de\"    = \"r010-efad005b-4deb-45a8-b1c5-5b3cea55e7e3\"\n      \"jp-tok\"   = \"r022-35126a90-aec2-4934-a628-d1ce90bcf68a\"\n      \"br-sao\"   = \"r042-978cecaf-7f2a-44bc-bffd-ddcf6ce56b11\"\n      \"au-syd\"   = \"r026-429369e1-d917-4d9c-8a8c-3a8606e26a72\"\n      \"us-south\" = \"r006-afe3c555-e8ba-4448-9983-151a14edf868\"\n      \"eu-gb\"    = \"r018-f2083d86-6f25-42d6-b66a-d5ed2a0108d2\"\n      \"jp-osa\"   = \"r034-edd01010-b7ee-411c-9158-d41960bf9def\"\n      \"us-east\"  = \"r014-41db5a03-ab7f-4bf7-95c2-8edbeea0e3af\"\n      \"ca-tor\"   = \"r038-f5d750b1-61dc-4fa5-98d3-a790417f07dd\"\n    }\n    f5-bigip-16-1-2-2-0-0-28-ltm-1slot = {\n      \"eu-de\"    = \"r010-c90f3597-d03e-4ce6-8efa-870c782952cd\"\n      \"jp-tok\"   = \"r022-0da3fc1b-c243-4702-87cc-b5a7f5e1f035\"\n      \"br-sao\"   = \"r042-0649e2fc-0d27-4950-99a8-1d968bc72dd5\"\n      \"au-syd\"   = \"r026-9de34b46-fc95-4940-a074-e45ac986c761\"\n      \"us-south\" = \"r006-863f431b-f4e2-4d8c-a358-07746a146ea1\"\n      \"eu-gb\"    = \"r018-a88026c2-89b4-43d6-8688-f28ac259627d\"\n      \"jp-osa\"   = \"r034-585692ec-9508-4a41-bcc3-3a94b31ad161\"\n      \"us-east\"  = \"r014-b675ae9f-109d-4499-9639-2fbc7b1d55e9\"\n      \"ca-tor\"   = \"r038-56cc321b-1920-443e-a400-c58905c8f46c\"\n    }\n    f5-bigip-16-1-2-2-0-0-28-all-1slot = {\n      \"eu-de\"    = \"r010-af6fa90b-ea18-48af-bfb9-a3605d60224d\"\n      \"jp-tok\"   = \"r022-d2bffe3c-084e-43ae-b331-ec82b15af705\"\n      \"br-sao\"   = \"r042-2dcd1226-5dd9-4b8d-89c5-5ba4f162b966\"\n      \"au-syd\"   = \"r026-1f8b30f1-af86-433d-861c-7ff36d69176b\"\n      \"us-south\" = \"r006-1c0242c4-a99c-4d27-ad2c-4003a7fea131\"\n      \"eu-gb\"    = \"r018-d33e87cb-0342-41e2-8e29-2b0db4a5881f\"\n      \"jp-osa\"   = \"r034-1b04698d-9935-4477-8f72-958c7f08c85f\"\n      \"us-east\"  = \"r014-015d6b06-611e-4e1a-9284-551ed3832182\"\n      \"ca-tor\"   = \"r038-b7a44268-e95f-425b-99ac-6ec5fc2c4cdc\"\n    }\n  }\n}\n\n##############################################################################\n\n##############################################################################\n# Template Data\n##############################################################################\n\nlocals {\n  do_byol_license      = <<EOD\n    schemaVersion: 1.0.0\n    class: Device\n    async: true\n    label: Cloudinit Onboarding\n    Common:\n      class: Tenant\n      byoLicense:\n        class: License\n        licenseType: regKey\n        regKey: null\nEOD\n  do_regekypool        = <<EOD\n    schemaVersion: 1.0.0\n    class: Device\n    async: true\n    label: Cloudinit Onboarding\n    Common:\n      class: Tenant\n      poolLicense:\n        class: License\n        licenseType: licensePool\n        bigIqHost: ${var.license_host}\n        bigIqUsername: ${var.license_username}\n        bigIqPassword: ${var.license_password}\n        licensePool: ${var.license_pool}\n        reachable: false\n        hypervisor: kvm\nEOD\n  do_utilitypool       = <<EOD\n    schemaVersion: 1.0.0\n    class: Device\n    async: true\n    label: Cloudinit Onboarding\n    Common:\n      class: Tenant\n      utilityLicense:\n        class: License\n        licenseType: licensePool\n        bigIqHost: ${var.license_host}\n        bigIqUsername: ${var.license_username}\n        bigIqPassword: ${var.license_password}\n        licensePool: ${var.license_pool}\n        skuKeyword1: ${var.license_sku_keyword_1}\n        skuKeyword2: ${var.license_sku_keyword_2}\n        unitOfMeasure: null\n        reachable: false\n        hypervisor: kvm\nEOD\n  template_file        = file(\"${path.module}/f5_user_data.yaml\")\n  do_dec1              = var.license_type == \"byol\" ? chomp(local.do_byol_license) : \"null\"\n  do_dec2              = var.license_type == \"regkeypool\" ? chomp(local.do_regekypool) : local.do_dec1\n  do_local_declaration = var.license_type == \"utilitypool\" ? chomp(local.do_utilitypool) : local.do_dec2\n}\n\n##############################################################################\n\n##############################################################################\n# F5 Ve 0 1 Zone 1 VSI\n##############################################################################\n\ndata \"template_file\" \"user_data_f5_ve_01_zone_1\" {\n  template = local.template_file\n  vars = {\n    tmos_admin_password     = var.tmos_admin_password\n    configsync_interface    = \"1.1\"\n    hostname                = \"f5-ve-01\"\n    domain                  = \"local\"\n    default_route_interface = \"1.1\"\n    default_route_gateway   = \"10.10.10.11\"\n    do_local_declaration    = local.do_local_declaration\n    do_declaration_url      = \"hi\"\n    as3_declaration_url     = \"hi\"\n    ts_declaration_url      = \"hi\"\n    phone_home_url          = \"hi\"\n    tgactive_url            = \"hi\"\n    tgstandby_url           = \"hi\"\n    tgrefresh_url           = \"hi\"\n    template_source         = \"f5devcentral/ibmcloud_schematics_bigip_multinic_declared\"\n    template_version        = \"hi\"\n    zone                    = \"us-south-1\"\n    vpc                     = ibm_is_vpc.edge_vpc.id\n    app_id                  = \"hi\"\n  }\n}\n\nresource \"ibm_is_instance\" \"f5_ve_01_zone_1\" {\n  name               = \"f5-ve-01-zone-1\"\n  image              = local.public_image_id[\"f5-bigip-16-1-2-2-0-0-28-all-1slot\"][\"us-south\"]\n  profile            = \"cx2-4x8\"\n  resource_group     = ibm_resource_group.slz_edge_rg.id\n  vpc                = ibm_is_vpc.edge_vpc.id\n  zone               = \"us-south-1\"\n  tags               = [\"slz\",\"landing-zone\"]\n  user_data          = data.template_file.user_data_f5_ve_01_zone_1.rendered\n\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n\n  primary_network_interface {\n    subnet          = ibm_is_subnet.edge_f5_management_zone_1.id\n    security_groups = [\n      ibm_is_security_group.edge_vpc_f5_management_sg_sg.id\n    ]\n  }\n\n  network_interfaces {\n    subnet            = ibm_is_subnet.edge_f5_bastion_zone_1.id\n    allow_ip_spoofing = true\n    security_groups = [\n      ibm_is_security_group.edge_vpc_f5_bastion_sg_sg.id\n    ]\n  }\n\n  network_interfaces {\n    subnet            = ibm_is_subnet.edge_f5_external_zone_1.id\n    allow_ip_spoofing = true\n    security_groups = [\n      ibm_is_security_group.edge_vpc_f5_external_sg_sg.id\n    ]\n  }\n\n  network_interfaces {\n    subnet            = ibm_is_subnet.edge_f5_workload_zone_1.id\n    allow_ip_spoofing = true\n    security_groups = [\n      ibm_is_security_group.edge_vpc_f5_workload_sg_sg.id\n    ]\n  }\n\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.key_id\n  }\n}\n\n##############################################################################\n",
  "f5_user_data.yaml": "#cloud-config\nchpasswd:\n  expire: false\n  list: |\n    admin:${tmos_admin_password}\ntmos_dhcpv4_tmm:\n  enabled: true\n  rd_enabled: false\n  icontrollx_trusted_sources: false\n  inject_routes: true\n  configsync_interface: ${configsync_interface}\n  default_route_interface: ${default_route_interface}\n  dhcp_timeout: 120\n  dhcpv4_options:\n    mgmt:\n      host-name: ${hostname}\n      domain-name: ${domain}\n    '${default_route_interface}':\n      routers: ${default_route_gateway}\n  do_enabled: true \n  do_declaration: ${do_local_declaration}\n  do_declaration_url: ${do_declaration_url}\n  as3_enabled: true\n  as3_declaration_url: ${as3_declaration_url}\n  ts_enabled: true\n  ts_declaration_url: ${ts_declaration_url}\n  phone_home_url: ${phone_home_url}\n  phone_home_url_verify_tls: false\n  phone_home_url_metadata:\n    template_source: ${template_source}\n    template_version: ${template_version}\n    zone: ${zone}\n    vpc: ${vpc}\n    app_id: ${app_id}\n  tgactive_url: ${tgactive_url}\n  tgstandby_url: ${tgstandby_url}\n  tgrefresh_url: ${tgrefresh_url}\n"
}