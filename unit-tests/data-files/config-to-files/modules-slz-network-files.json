{
  "management_vpc": {
    "acl_management_management.tf": "##############################################################################\n# Management Management ACL\n##############################################################################\n\nresource \"ibm_is_network_acl\" \"management_management_acl\" {\n  name           = \"${var.prefix}-management-management-acl\"\n  vpc            = ibm_is_vpc.management_vpc.id\n  resource_group = var.slz_management_rg_id\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  rules {\n    source      = \"161.26.0.0/16\"\n    action      = \"allow\"\n    destination = \"10.0.0.0/8\"\n    direction   = \"inbound\"\n    name        = \"allow-ibm-inbound\"\n  }\n  rules {\n    source      = \"10.0.0.0/8\"\n    action      = \"allow\"\n    destination = \"10.0.0.0/8\"\n    direction   = \"inbound\"\n    name        = \"allow-all-network-inbound\"\n  }\n  rules {\n    source      = \"0.0.0.0/0\"\n    action      = \"allow\"\n    destination = \"0.0.0.0/0\"\n    direction   = \"outbound\"\n    name        = \"allow-all-outbound\"\n  }\n}\n\n##############################################################################\n",
    "main.tf": "##############################################################################\n# Management VPC\n##############################################################################\n\nresource \"ibm_is_vpc\" \"management_vpc\" {\n  name                        = \"${var.prefix}-management-vpc\"\n  resource_group              = var.slz_management_rg_id\n  tags                        = var.tags\n  address_prefix_management   = \"manual\"\n  default_network_acl_name    = null\n  default_security_group_name = null\n  default_routing_table_name  = null\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vsi_zone_1_prefix\" {\n  name = \"${var.prefix}-management-vsi-zone-1\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"${var.region}-1\"\n  cidr = \"10.10.10.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vsi_zone_2_prefix\" {\n  name = \"${var.prefix}-management-vsi-zone-2\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"${var.region}-2\"\n  cidr = \"10.10.20.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vsi_zone_3_prefix\" {\n  name = \"${var.prefix}-management-vsi-zone-3\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"${var.region}-3\"\n  cidr = \"10.10.30.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vpe_zone_1_prefix\" {\n  name = \"${var.prefix}-management-vpe-zone-1\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"${var.region}-1\"\n  cidr = \"10.20.10.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vpe_zone_2_prefix\" {\n  name = \"${var.prefix}-management-vpe-zone-2\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"${var.region}-2\"\n  cidr = \"10.20.20.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vpe_zone_3_prefix\" {\n  name = \"${var.prefix}-management-vpe-zone-3\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"${var.region}-3\"\n  cidr = \"10.20.30.0/24\"\n}\n\nresource \"ibm_is_vpc_address_prefix\" \"management_vpn_zone_1_prefix\" {\n  name = \"${var.prefix}-management-vpn-zone-1\"\n  vpc  = ibm_is_vpc.management_vpc.id\n  zone = \"${var.region}-1\"\n  cidr = \"10.30.10.0/24\"\n}\n\nresource \"ibm_is_subnet\" \"management_vsi_zone_1\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"${var.prefix}-management-vsi-zone-1\"\n  zone            = \"${var.region}-1\"\n  resource_group  = var.slz_management_rg_id\n  tags            = var.tags\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vsi_zone_1_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vpn_zone_1\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"${var.prefix}-management-vpn-zone-1\"\n  zone            = \"${var.region}-1\"\n  resource_group  = var.slz_management_rg_id\n  tags            = var.tags\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vpn_zone_1_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vsi_zone_2\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"${var.prefix}-management-vsi-zone-2\"\n  zone            = \"${var.region}-2\"\n  resource_group  = var.slz_management_rg_id\n  tags            = var.tags\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vsi_zone_2_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vsi_zone_3\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"${var.prefix}-management-vsi-zone-3\"\n  zone            = \"${var.region}-3\"\n  resource_group  = var.slz_management_rg_id\n  tags            = var.tags\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vsi_zone_3_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vpe_zone_1\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"${var.prefix}-management-vpe-zone-1\"\n  zone            = \"${var.region}-1\"\n  resource_group  = var.slz_management_rg_id\n  tags            = var.tags\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vpe_zone_1_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vpe_zone_2\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"${var.prefix}-management-vpe-zone-2\"\n  zone            = \"${var.region}-2\"\n  resource_group  = var.slz_management_rg_id\n  tags            = var.tags\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vpe_zone_2_prefix.cidr\n}\n\nresource \"ibm_is_subnet\" \"management_vpe_zone_3\" {\n  vpc             = ibm_is_vpc.management_vpc.id\n  name            = \"${var.prefix}-management-vpe-zone-3\"\n  zone            = \"${var.region}-3\"\n  resource_group  = var.slz_management_rg_id\n  tags            = var.tags\n  network_acl     = ibm_is_network_acl.management_management_acl.id\n  ipv4_cidr_block = ibm_is_vpc_address_prefix.management_vpe_zone_3_prefix.cidr\n}\n\n##############################################################################\n",
    "outputs.tf": "##############################################################################\n# Management VPC Outputs\n##############################################################################\n\noutput \"id\" {\n  value = ibm_is_vpc.management_vpc.id\n}\n\noutput \"crn\" {\n  value = ibm_is_vpc.management_vpc.crn\n}\n\noutput \"vsi_zone_1_id\" {\n  value = ibm_is_subnet.management_vsi_zone_1.id\n}\n\noutput \"vsi_zone_1_crn\" {\n  value = ibm_is_subnet.management_vsi_zone_1.crn\n}\n\noutput \"vpn_zone_1_id\" {\n  value = ibm_is_subnet.management_vpn_zone_1.id\n}\n\noutput \"vpn_zone_1_crn\" {\n  value = ibm_is_subnet.management_vpn_zone_1.crn\n}\n\noutput \"vsi_zone_2_id\" {\n  value = ibm_is_subnet.management_vsi_zone_2.id\n}\n\noutput \"vsi_zone_2_crn\" {\n  value = ibm_is_subnet.management_vsi_zone_2.crn\n}\n\noutput \"vsi_zone_3_id\" {\n  value = ibm_is_subnet.management_vsi_zone_3.id\n}\n\noutput \"vsi_zone_3_crn\" {\n  value = ibm_is_subnet.management_vsi_zone_3.crn\n}\n\noutput \"vpe_zone_1_id\" {\n  value = ibm_is_subnet.management_vpe_zone_1.id\n}\n\noutput \"vpe_zone_1_crn\" {\n  value = ibm_is_subnet.management_vpe_zone_1.crn\n}\n\noutput \"vpe_zone_2_id\" {\n  value = ibm_is_subnet.management_vpe_zone_2.id\n}\n\noutput \"vpe_zone_2_crn\" {\n  value = ibm_is_subnet.management_vpe_zone_2.crn\n}\n\noutput \"vpe_zone_3_id\" {\n  value = ibm_is_subnet.management_vpe_zone_3.id\n}\n\noutput \"vpe_zone_3_crn\" {\n  value = ibm_is_subnet.management_vpe_zone_3.crn\n}\n\noutput \"management_vpe_sg_id\" {\n  value = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n}\n\n##############################################################################\n",
    "rt_routing_table.tf": "##############################################################################\n# Routing Table Routing Table\n##############################################################################\n\nresource \"ibm_is_vpc_routing_table\" \"management_vpc_routing_table_table\" {\n  name                          = \"${var.prefix}-management-vpc-routing-table-table\"\n  vpc                           = ibm_is_vpc.management_vpc.id\n  route_direct_link_ingress     = true\n  route_transit_gateway_ingress = true\n  route_vpc_zone_ingress        = true\n}\n\nresource \"ibm_is_vpc_routing_table_route\" \"management_vpc_routing_table_table_test_route_route\" {\n  vpc           = ibm_is_vpc.management_vpc.id\n  routing_table = ibm_is_vpc_routing_table.management_vpc_routing_table_table.routing_table\n  zone          = \"${var.region}-1\"\n  name          = \"${var.prefix}-management-routing-table-test-route-route\"\n  destination   = \"1.2.3.4/5\"\n  action        = \"delegate\"\n  next_hop      = \"0.0.0.0\"\n}\n\n##############################################################################\n",
    "sg_management_vpe_sg.tf": "##############################################################################\n# Security Group Management VPE Sg\n##############################################################################\n\nresource \"ibm_is_security_group\" \"management_vpc_management_vpe_sg_sg\" {\n  name           = \"${var.prefix}-management-management-vpe-sg-sg\"\n  vpc            = ibm_is_vpc.management_vpc.id\n  resource_group = var.slz_management_rg_id\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_ibm_inbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"inbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_vpc_inbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"10.0.0.0/8\"\n  direction = \"inbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_vpc_outbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"10.0.0.0/8\"\n  direction = \"outbound\"\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_ibm_tcp_53_outbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n  tcp {\n    port_min = 53\n    port_max = 53\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_ibm_tcp_80_outbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n  tcp {\n    port_min = 80\n    port_max = 80\n  }\n}\n\nresource \"ibm_is_security_group_rule\" \"management_vpc_management_vpe_sg_sg_rule_allow_ibm_tcp_443_outbound\" {\n  group     = ibm_is_security_group.management_vpc_management_vpe_sg_sg.id\n  remote    = \"161.26.0.0/16\"\n  direction = \"outbound\"\n  tcp {\n    port_min = 443\n    port_max = 443\n  }\n}\n\n##############################################################################\n",
    "variables.tf": "##############################################################################\n# Management VPC Variables\n##############################################################################\n\nvariable \"tags\" {\n  description = \"List of tags\"\n  type        = list(string)\n}\n\nvariable \"region\" {\n  description = \"IBM Cloud Region where resources will be provisioned\"\n  type        = string\n}\n\nvariable \"prefix\" {\n  description = \"Name prefix that will be prepended to named resources\"\n  type        = string\n}\n\nvariable \"slz_management_rg_id\" {\n  description = \"ID for the resource group slz-management-rg\"\n  type        = string\n}\n\n##############################################################################\n",
    "versions.tf": "##############################################################################\n# Terraform Providers\n##############################################################################\n\nterraform {\n  required_providers {\n    ibm = {\n      source  = \"IBM-Cloud/ibm\"\n      version = \"~>1.52.1\"\n    }\n  }\n  required_version = \">=1.3\"\n}\n\n##############################################################################\n"
  },
  "main.tf": "##############################################################################\n# IBM Cloud Provider\n##############################################################################\n\nprovider \"ibm\" {\n  ibmcloud_api_key = var.ibmcloud_api_key\n  region           = var.region\n  ibmcloud_timeout = 60\n}\n\n#############################################################################\n\n##############################################################################\n# Management VPC Module\n##############################################################################\n\nmodule \"management_vpc\" {\n  source               = \"./management_vpc\"\n  region               = var.region\n  prefix               = var.prefix\n  slz_management_rg_id = ibm_resource_group.slz_management_rg.id\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\n##############################################################################\n\n##############################################################################\n# Workload VPC Module\n##############################################################################\n\nmodule \"workload_vpc\" {\n  source             = \"./workload_vpc\"\n  region             = var.region\n  prefix             = var.prefix\n  slz_workload_rg_id = ibm_resource_group.slz_workload_rg.id\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\n##############################################################################\n",
  "flow_logs.tf": "##############################################################################\n# Flow Logs Resources\n##############################################################################\n\nresource \"ibm_iam_authorization_policy\" \"flow_logs_to_cos_object_storage_policy\" {\n  source_service_name         = \"is\"\n  source_resource_type        = \"flow-log-collector\"\n  description                 = \"Allow flow logs write access cloud object storage instance\"\n  target_service_name         = \"cloud-object-storage\"\n  target_resource_instance_id = ibm_resource_instance.cos_object_storage.guid\n  roles = [\n    \"Writer\"\n  ]\n}\n\nresource \"ibm_is_flow_log\" \"management_flow_log_collector\" {\n  name           = \"${var.prefix}-management-vpc-logs\"\n  target         = module.management_vpc.id\n  active         = true\n  storage_bucket = ibm_cos_bucket.cos_object_storage_management_bucket_bucket.bucket_name\n  resource_group = ibm_resource_group.slz_management_rg.id\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  depends_on = [\n    ibm_iam_authorization_policy.flow_logs_to_cos_object_storage_policy\n  ]\n}\n\nresource \"ibm_is_flow_log\" \"workload_flow_log_collector\" {\n  name           = \"${var.prefix}-workload-vpc-logs\"\n  target         = module.workload_vpc.id\n  active         = true\n  storage_bucket = ibm_cos_bucket.cos_object_storage_management_bucket_bucket.bucket_name\n  resource_group = ibm_resource_group.slz_workload_rg.id\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  depends_on = [\n    ibm_iam_authorization_policy.flow_logs_to_cos_object_storage_policy\n  ]\n}\n\n##############################################################################\n",
  "transit_gateways.tf": "##############################################################################\n# Transit Gateway Transit Gateway\n##############################################################################\n\nresource \"ibm_tg_gateway\" \"transit_gateway\" {\n  name           = \"${var.prefix}-transit-gateway\"\n  location       = var.region\n  global         = false\n  resource_group = ibm_resource_group.slz_service_rg.id\n  timeouts {\n    create = \"30m\"\n    delete = \"30m\"\n  }\n}\n\nresource \"ibm_tg_connection\" \"transit_gateway_to_management_connection\" {\n  gateway      = ibm_tg_gateway.transit_gateway.id\n  network_type = \"vpc\"\n  name         = \"${var.prefix}-transit-gateway-management-hub-connection\"\n  network_id   = module.management_vpc.crn\n  timeouts {\n    create = \"30m\"\n    delete = \"30m\"\n  }\n}\n\nresource \"ibm_tg_connection\" \"transit_gateway_to_workload_connection\" {\n  gateway      = ibm_tg_gateway.transit_gateway.id\n  network_type = \"vpc\"\n  name         = \"${var.prefix}-transit-gateway-workload-hub-connection\"\n  network_id   = module.workload_vpc.crn\n  timeouts {\n    create = \"30m\"\n    delete = \"30m\"\n  }\n}\n\n##############################################################################\n",
  "virtual_private_endpoints.tf": "##############################################################################\n# Management VPE Resources\n##############################################################################\n\nresource \"ibm_is_subnet_reserved_ip\" \"management_vpc_vpe_zone_1_subnet_vpe_ip\" {\n  subnet = module.management_vpc.vpe_zone_1_id\n}\n\nresource \"ibm_is_subnet_reserved_ip\" \"management_vpc_vpe_zone_2_subnet_vpe_ip\" {\n  subnet = module.management_vpc.vpe_zone_2_id\n}\n\nresource \"ibm_is_subnet_reserved_ip\" \"management_vpc_vpe_zone_3_subnet_vpe_ip\" {\n  subnet = module.management_vpc.vpe_zone_3_id\n}\n\nresource \"ibm_is_virtual_endpoint_gateway\" \"management_vpc_cos_vpe_gateway\" {\n  name           = \"${var.prefix}-management-cos-vpe-gw\"\n  vpc            = module.management_vpc.id\n  resource_group = ibm_resource_group.slz_management_rg.id\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  security_groups = [\n    module.management_vpc.management_vpe_sg_id\n  ]\n  target {\n    crn           = \"crn:v1:bluemix:public:cloud-object-storage:global:::endpoint:s3.direct.${var.region}.cloud-object-storage.appdomain.cloud\"\n    resource_type = \"provider_cloud_service\"\n  }\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"management_vpc_cos_gw_vpe_zone_1_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.management_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.management_vpc_vpe_zone_1_subnet_vpe_ip.reserved_ip\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"management_vpc_cos_gw_vpe_zone_2_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.management_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.management_vpc_vpe_zone_2_subnet_vpe_ip.reserved_ip\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"management_vpc_cos_gw_vpe_zone_3_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.management_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.management_vpc_vpe_zone_3_subnet_vpe_ip.reserved_ip\n}\n\n##############################################################################\n\n##############################################################################\n# Workload VPE Resources\n##############################################################################\n\nresource \"ibm_is_subnet_reserved_ip\" \"workload_vpc_vpe_zone_1_subnet_vpe_ip\" {\n  subnet = module.workload_vpc.vpe_zone_1_id\n}\n\nresource \"ibm_is_subnet_reserved_ip\" \"workload_vpc_vpe_zone_2_subnet_vpe_ip\" {\n  subnet = module.workload_vpc.vpe_zone_2_id\n}\n\nresource \"ibm_is_subnet_reserved_ip\" \"workload_vpc_vpe_zone_3_subnet_vpe_ip\" {\n  subnet = module.workload_vpc.vpe_zone_3_id\n}\n\nresource \"ibm_is_virtual_endpoint_gateway\" \"workload_vpc_cos_vpe_gateway\" {\n  name           = \"${var.prefix}-workload-cos-vpe-gw\"\n  vpc            = module.workload_vpc.id\n  resource_group = ibm_resource_group.slz_workload_rg.id\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  security_groups = [\n    module.workload_vpc.workload_vpe_sg_id\n  ]\n  target {\n    crn           = \"crn:v1:bluemix:public:cloud-object-storage:global:::endpoint:s3.direct.${var.region}.cloud-object-storage.appdomain.cloud\"\n    resource_type = \"provider_cloud_service\"\n  }\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"workload_vpc_cos_gw_vpe_zone_1_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.workload_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.workload_vpc_vpe_zone_1_subnet_vpe_ip.reserved_ip\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"workload_vpc_cos_gw_vpe_zone_2_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.workload_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.workload_vpc_vpe_zone_2_subnet_vpe_ip.reserved_ip\n}\n\nresource \"ibm_is_virtual_endpoint_gateway_ip\" \"workload_vpc_cos_gw_vpe_zone_3_gateway_ip\" {\n  gateway     = ibm_is_virtual_endpoint_gateway.workload_vpc_cos_vpe_gateway.id\n  reserved_ip = ibm_is_subnet_reserved_ip.workload_vpc_vpe_zone_3_subnet_vpe_ip.reserved_ip\n}\n\n##############################################################################\n",
  "vpn_gateways.tf": "##############################################################################\n# VPN Gateways\n##############################################################################\n\nresource \"ibm_is_vpn_gateway\" \"management_management_gateway_vpn_gw\" {\n  name           = \"${var.prefix}-management-management-gateway-vpn-gw\"\n  subnet         = module.management_vpc.vpn_zone_1_id\n  resource_group = ibm_resource_group.slz_management_rg.id\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  timeouts {\n    delete = \"1h\"\n  }\n}\n\n##############################################################################\n",
  "versions.tf": "##############################################################################\n# Terraform Providers\n##############################################################################\n\nterraform {\n  required_providers {\n    ibm = {\n      source  = \"IBM-Cloud/ibm\"\n      version = \"~>1.52.1\"\n    }\n  }\n  required_version = \">=1.3\"\n}\n\n##############################################################################\n",
  "variables.tf": "##############################################################################\n# Variables\n##############################################################################\n\nvariable \"ibmcloud_api_key\" {\n  description = \"The IBM Cloud platform API key needed to deploy IAM enabled resources.\"\n  type        = string\n  sensitive   = true\n}\n\nvariable \"region\" {\n  description = \"IBM Cloud Region where resources will be provisioned\"\n  type        = string\n  default     = \"us-south\"\n}\n\nvariable \"prefix\" {\n  description = \"Name prefix that will be prepended to named resources\"\n  type        = string\n  default     = \"slz\"\n}\n\nvariable \"slz_ssh_key_public_key\" {\n  description = \"Public SSH Key Value for Slz SSH Key\"\n  type        = string\n  sensitive   = true\n  default     = \"public-key\"\n}\n\n##############################################################################\n",
  "key_management.tf": "##############################################################################\n# Key Management Instance Slz Kms\n##############################################################################\n\nresource \"ibm_resource_instance\" \"slz_kms\" {\n  name              = \"${var.prefix}-slz-kms\"\n  resource_group_id = ibm_resource_group.slz_service_rg.id\n  service           = \"kms\"\n  plan              = \"tiered-pricing\"\n  location          = var.region\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\nresource \"ibm_iam_authorization_policy\" \"slz_kms_server_protect_policy\" {\n  source_service_name         = \"server-protect\"\n  target_service_name         = \"kms\"\n  target_resource_instance_id = ibm_resource_instance.slz_kms.guid\n  description                 = \"Allow block storage volumes to be encrypted by Key Management instance.\"\n  roles = [\n    \"Reader\"\n  ]\n}\n\nresource \"ibm_iam_authorization_policy\" \"slz_kms_block_storage_policy\" {\n  source_service_name         = \"is\"\n  target_service_name         = \"kms\"\n  target_resource_instance_id = ibm_resource_instance.slz_kms.guid\n  description                 = \"Allow block storage volumes to be encrypted by Key Management instance.\"\n  source_resource_type        = \"share\"\n  roles = [\n    \"Reader\",\n    \"Authorization Delegator\"\n  ]\n}\n\nresource \"ibm_kms_key_rings\" \"slz_kms_slz_slz_ring_ring\" {\n  key_ring_id = \"${var.prefix}-slz-kms-slz-slz-ring\"\n  instance_id = ibm_resource_instance.slz_kms.guid\n}\n\nresource \"ibm_kms_key\" \"slz_kms_slz_slz_key_key\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  key_name      = \"${var.prefix}-slz-kms-slz-slz-key\"\n  standard_key  = false\n  key_ring_id   = ibm_kms_key_rings.slz_kms_slz_slz_ring_ring.key_ring_id\n  force_delete  = true\n  endpoint_type = \"public\"\n  depends_on = [\n    ibm_iam_authorization_policy.slz_kms_server_protect_policy,\n    ibm_iam_authorization_policy.slz_kms_block_storage_policy\n  ]\n}\n\nresource \"ibm_kms_key_policies\" \"slz_kms_slz_slz_key_key_policy\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  endpoint_type = \"public\"\n  key_id        = ibm_kms_key.slz_kms_slz_slz_key_key.key_id\n  rotation {\n    interval_month = 12\n  }\n  dual_auth_delete {\n    enabled = false\n  }\n}\n\nresource \"ibm_kms_key\" \"slz_kms_slz_atracker_key_key\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  key_name      = \"${var.prefix}-slz-kms-slz-atracker-key\"\n  standard_key  = false\n  key_ring_id   = ibm_kms_key_rings.slz_kms_slz_slz_ring_ring.key_ring_id\n  force_delete  = true\n  endpoint_type = \"public\"\n  depends_on = [\n    ibm_iam_authorization_policy.slz_kms_server_protect_policy,\n    ibm_iam_authorization_policy.slz_kms_block_storage_policy\n  ]\n}\n\nresource \"ibm_kms_key_policies\" \"slz_kms_slz_atracker_key_key_policy\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  endpoint_type = \"public\"\n  key_id        = ibm_kms_key.slz_kms_slz_atracker_key_key.key_id\n  rotation {\n    interval_month = 12\n  }\n  dual_auth_delete {\n    enabled = false\n  }\n}\n\nresource \"ibm_kms_key\" \"slz_kms_slz_vsi_volume_key_key\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  key_name      = \"${var.prefix}-slz-kms-slz-vsi-volume-key\"\n  standard_key  = false\n  key_ring_id   = ibm_kms_key_rings.slz_kms_slz_slz_ring_ring.key_ring_id\n  force_delete  = true\n  endpoint_type = \"public\"\n  depends_on = [\n    ibm_iam_authorization_policy.slz_kms_server_protect_policy,\n    ibm_iam_authorization_policy.slz_kms_block_storage_policy\n  ]\n}\n\nresource \"ibm_kms_key_policies\" \"slz_kms_slz_vsi_volume_key_key_policy\" {\n  instance_id   = ibm_resource_instance.slz_kms.guid\n  endpoint_type = \"public\"\n  key_id        = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.key_id\n  rotation {\n    interval_month = 12\n  }\n  dual_auth_delete {\n    enabled = false\n  }\n}\n\n##############################################################################\n\n",
  "object_storage.tf": "##############################################################################\n# Object Storage Instance Atracker Cos\n##############################################################################\n\nresource \"random_string\" \"atracker_cos_random_suffix\" {\n  length  = 8\n  special = false\n  upper   = false\n}\n\nresource \"ibm_resource_instance\" \"atracker_cos_object_storage\" {\n  name              = \"${var.prefix}-atracker-cos-object-storage-${random_string.atracker_cos_random_suffix.result}\"\n  resource_group_id = ibm_resource_group.slz_service_rg.id\n  service           = \"cloud-object-storage\"\n  location          = \"global\"\n  plan              = \"standard\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\nresource \"ibm_iam_authorization_policy\" \"atracker_cos_cos_to_slz_kms_kms_policy\" {\n  source_service_name         = \"cloud-object-storage\"\n  source_resource_instance_id = ibm_resource_instance.atracker_cos_object_storage.guid\n  description                 = \"Allow COS instance to read from KMS instance\"\n  target_service_name         = \"kms\"\n  target_resource_instance_id = ibm_resource_instance.slz_kms.guid\n  roles = [\n    \"Reader\"\n  ]\n}\n\nresource \"ibm_cos_bucket\" \"atracker_cos_object_storage_atracker_bucket_bucket\" {\n  bucket_name          = \"${var.prefix}-atracker-cos-atracker-bucket-${random_string.atracker_cos_random_suffix.result}\"\n  resource_instance_id = ibm_resource_instance.atracker_cos_object_storage.id\n  storage_class        = \"standard\"\n  endpoint_type        = \"public\"\n  force_delete         = true\n  region_location      = var.region\n  key_protect          = ibm_kms_key.slz_kms_slz_atracker_key_key.crn\n  depends_on = [\n    ibm_iam_authorization_policy.atracker_cos_cos_to_slz_kms_kms_policy\n  ]\n}\n\nresource \"ibm_resource_key\" \"atracker_cos_object_storage_key_cos_bind_key\" {\n  name                 = \"${var.prefix}-atracker-cos-key-cos-bind-key-${random_string.atracker_cos_random_suffix.result}\"\n  resource_instance_id = ibm_resource_instance.atracker_cos_object_storage.id\n  role                 = \"Writer\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\n##############################################################################\n\n##############################################################################\n# Object Storage Instance Cos\n##############################################################################\n\nresource \"random_string\" \"cos_random_suffix\" {\n  length  = 8\n  special = false\n  upper   = false\n}\n\nresource \"ibm_resource_instance\" \"cos_object_storage\" {\n  name              = \"${var.prefix}-cos-object-storage-${random_string.cos_random_suffix.result}\"\n  resource_group_id = ibm_resource_group.slz_service_rg.id\n  service           = \"cloud-object-storage\"\n  location          = \"global\"\n  plan              = \"standard\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\nresource \"ibm_iam_authorization_policy\" \"cos_cos_to_slz_kms_kms_policy\" {\n  source_service_name         = \"cloud-object-storage\"\n  source_resource_instance_id = ibm_resource_instance.cos_object_storage.guid\n  description                 = \"Allow COS instance to read from KMS instance\"\n  target_service_name         = \"kms\"\n  target_resource_instance_id = ibm_resource_instance.slz_kms.guid\n  roles = [\n    \"Reader\"\n  ]\n}\n\nresource \"ibm_cos_bucket\" \"cos_object_storage_management_bucket_bucket\" {\n  bucket_name          = \"${var.prefix}-cos-management-bucket-${random_string.cos_random_suffix.result}\"\n  resource_instance_id = ibm_resource_instance.cos_object_storage.id\n  storage_class        = \"standard\"\n  endpoint_type        = \"public\"\n  force_delete         = true\n  region_location      = var.region\n  key_protect          = ibm_kms_key.slz_kms_slz_slz_key_key.crn\n  depends_on = [\n    ibm_iam_authorization_policy.cos_cos_to_slz_kms_kms_policy\n  ]\n}\n\nresource \"ibm_cos_bucket\" \"cos_object_storage_workload_bucket_bucket\" {\n  bucket_name          = \"${var.prefix}-cos-workload-bucket-${random_string.cos_random_suffix.result}\"\n  resource_instance_id = ibm_resource_instance.cos_object_storage.id\n  storage_class        = \"standard\"\n  endpoint_type        = \"public\"\n  force_delete         = true\n  region_location      = var.region\n  key_protect          = ibm_kms_key.slz_kms_slz_slz_key_key.crn\n  depends_on = [\n    ibm_iam_authorization_policy.cos_cos_to_slz_kms_kms_policy\n  ]\n}\n\n##############################################################################\n\n",
  "atracker.tf": "##############################################################################\n# Atracker Resources\n##############################################################################\n\nresource \"ibm_atracker_target\" \"slz_atracker_cos_target\" {\n  name        = \"${var.prefix}-slz-atracker-cos\"\n  target_type = \"cloud_object_storage\"\n  region      = var.region\n\n  cos_endpoint {\n    endpoint   = \"s3.private.${var.region}.cloud-object-storage.appdomain.cloud\"\n    target_crn = ibm_resource_instance.atracker_cos_object_storage.id\n    bucket     = ibm_cos_bucket.atracker_cos_object_storage_atracker_bucket_bucket.bucket_name\n    api_key    = ibm_resource_key.atracker_cos_object_storage_key_cos_bind_key.credentials.apikey\n  }\n}\n\nresource \"ibm_atracker_route\" \"slz_atracker_cos_route\" {\n  name = \"${var.prefix}-slz-atracker-cos-route\"\n\n  rules {\n    target_ids = [ibm_atracker_target.slz_atracker_cos_target.id]\n    locations  = [\"global\",var.region]\n  }\n}\n\n##############################################################################",
  "resource_groups.tf": "##############################################################################\n# Resource Groups\n##############################################################################\n\nresource \"ibm_resource_group\" \"slz_service_rg\" {\n  name = \"${var.prefix}-slz-service-rg\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\nresource \"ibm_resource_group\" \"slz_management_rg\" {\n  name = \"${var.prefix}-slz-management-rg\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\nresource \"ibm_resource_group\" \"slz_workload_rg\" {\n  name = \"${var.prefix}-slz-workload-rg\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\n##############################################################################\n",
  "clusters.tf": "##############################################################################\n# Workload Cluster\n##############################################################################\n\nresource \"ibm_container_vpc_cluster\" \"workload_vpc_workload_cluster\" {\n  name                            = \"${var.prefix}-workload-cluster\"\n  vpc_id                          = module.workload_vpc.id\n  resource_group_id               = ibm_resource_group.slz_workload_rg.id\n  flavor                          = \"bx2.16x64\"\n  worker_count                    = 2\n  kube_version                    = \"default\"\n  wait_till                       = \"IngressReady\"\n  disable_public_service_endpoint = false\n  entitlement                     = \"cloud_pak\"\n  cos_instance_crn                = ibm_resource_instance.cos_object_storage.crn\n  update_all_workers              = null\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  zones {\n    name      = \"${var.region}-1\"\n    subnet_id = module.workload_vpc.vsi_zone_1_id\n  }\n  zones {\n    name      = \"${var.region}-2\"\n    subnet_id = module.workload_vpc.vsi_zone_2_id\n  }\n  zones {\n    name      = \"${var.region}-3\"\n    subnet_id = module.workload_vpc.vsi_zone_3_id\n  }\n  timeouts {\n    create = \"3h\"\n    update = \"3h\"\n    delete = \"2h\"\n  }\n  kms_config {\n    crk_id           = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.key_id\n    instance_id      = ibm_resource_instance.slz_kms.guid\n    private_endpoint = false\n  }\n}\n\nresource \"ibm_container_vpc_worker_pool\" \"workload_vpc_workload_cluster_logging_pool_pool\" {\n  worker_pool_name  = \"${var.prefix}-workload-cluster-logging-pool\"\n  vpc_id            = module.workload_vpc.id\n  resource_group_id = ibm_resource_group.slz_workload_rg.id\n  cluster           = ibm_container_vpc_cluster.workload_vpc_workload_cluster.id\n  flavor            = \"bx2.16x64\"\n  worker_count      = 2\n  entitlement       = \"cloud_pak\"\n  zones {\n    name      = \"${var.region}-1\"\n    subnet_id = module.workload_vpc.vsi_zone_1_id\n  }\n  zones {\n    name      = \"${var.region}-2\"\n    subnet_id = module.workload_vpc.vsi_zone_2_id\n  }\n  zones {\n    name      = \"${var.region}-3\"\n    subnet_id = module.workload_vpc.vsi_zone_3_id\n  }\n}\n\n##############################################################################\n",
  "virtual_servers.tf": "##############################################################################\n# Image Data Sources\n##############################################################################\n\ndata \"ibm_is_image\" \"ibm_ubuntu_18_04_6_minimal_amd64_2\" {\n  name = \"ibm-ubuntu-18-04-6-minimal-amd64-2\"\n}\n\n##############################################################################\n\n##############################################################################\n# Management VPC Management Server Deployment\n##############################################################################\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_1_1\" {\n  name           = \"${var.prefix}-management-management-server-vsi-zone-1-1\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = module.management_vpc.id\n  zone           = \"${var.region}-1\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  primary_network_interface {\n    subnet = ibm_is_subnet.management_vsi_zone_1.id\n    security_groups = [\n      module.management_vpc.management_vpe_sg_id\n    ]\n  }\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.crn\n  }\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n}\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_1_2\" {\n  name           = \"${var.prefix}-management-management-server-vsi-zone-1-2\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = module.management_vpc.id\n  zone           = \"${var.region}-1\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  primary_network_interface {\n    subnet = ibm_is_subnet.management_vsi_zone_1.id\n    security_groups = [\n      module.management_vpc.management_vpe_sg_id\n    ]\n  }\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.crn\n  }\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n}\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_2_1\" {\n  name           = \"${var.prefix}-management-management-server-vsi-zone-2-1\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = module.management_vpc.id\n  zone           = \"${var.region}-2\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  primary_network_interface {\n    subnet = ibm_is_subnet.management_vsi_zone_2.id\n    security_groups = [\n      module.management_vpc.management_vpe_sg_id\n    ]\n  }\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.crn\n  }\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n}\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_2_2\" {\n  name           = \"${var.prefix}-management-management-server-vsi-zone-2-2\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = module.management_vpc.id\n  zone           = \"${var.region}-2\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  primary_network_interface {\n    subnet = ibm_is_subnet.management_vsi_zone_2.id\n    security_groups = [\n      module.management_vpc.management_vpe_sg_id\n    ]\n  }\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.crn\n  }\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n}\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_3_1\" {\n  name           = \"${var.prefix}-management-management-server-vsi-zone-3-1\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = module.management_vpc.id\n  zone           = \"${var.region}-3\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  primary_network_interface {\n    subnet = ibm_is_subnet.management_vsi_zone_3.id\n    security_groups = [\n      module.management_vpc.management_vpe_sg_id\n    ]\n  }\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.crn\n  }\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n}\n\nresource \"ibm_is_instance\" \"management_vpc_management_server_vsi_3_2\" {\n  name           = \"${var.prefix}-management-management-server-vsi-zone-3-2\"\n  image          = data.ibm_is_image.ibm_ubuntu_18_04_6_minimal_amd64_2.id\n  profile        = \"cx2-4x8\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  vpc            = module.management_vpc.id\n  zone           = \"${var.region}-3\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  primary_network_interface {\n    subnet = ibm_is_subnet.management_vsi_zone_3.id\n    security_groups = [\n      module.management_vpc.management_vpe_sg_id\n    ]\n  }\n  boot_volume {\n    encryption = ibm_kms_key.slz_kms_slz_vsi_volume_key_key.crn\n  }\n  keys = [\n    ibm_is_ssh_key.slz_ssh_key.id\n  ]\n}\n\n##############################################################################\n",
  "ssh_keys.tf": "##############################################################################\n# SSH Keys\n##############################################################################\n\nresource \"ibm_is_ssh_key\" \"slz_ssh_key\" {\n  name           = \"${var.prefix}-slz-ssh-key\"\n  public_key     = var.slz_ssh_key_public_key\n  resource_group = ibm_resource_group.slz_management_rg.id\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\n##############################################################################\n",
  "appid.tf": "##############################################################################\n# Test Appid Resources\n##############################################################################\n\nresource \"ibm_resource_instance\" \"test_appid\" {\n  name              = \"${var.prefix}-test-appid\"\n  resource_group_id = ibm_resource_group.slz_service_rg.id\n  service           = \"appid\"\n  plan              = \"graduated-tier\"\n  location          = var.region\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\nresource \"ibm_resource_key\" \"test_appid_key_test_key\" {\n  name                 = \"${var.prefix}-test-appid-test-key\"\n  resource_instance_id = ibm_resource_instance.test_appid.id\n  role                 = \"Writer\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\nresource \"ibm_resource_key\" \"test_appid_key_test_key_2\" {\n  name                 = \"${var.prefix}-test-appid-test-key-2\"\n  resource_instance_id = ibm_resource_instance.test_appid.id\n  role                 = \"Writer\"\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n}\n\n##############################################################################\n",
  "scc.tf": "##############################################################################\n# Security and Compliance Center Credentials\n##############################################################################\n\nresource \"ibm_scc_posture_credential\" \"scc_credentials\" {\n  description = \"scc posture credential description\"\n  enabled     = true\n  name        = \"scc-posture-credential\"\n  type        = \"ibm_cloud\"\n  purpose     = \"discovery_fact_collection_remediation\"\n  display_fields {\n    ibm_api_key = var.ibmcloud_api_key\n  }\n  group {\n    id         = \"scc_group_id\"\n    passphrase = \"scc_group_passphrase\"\n  }\n}\n\n##############################################################################\n\n##############################################################################\n# Security and Compliance Center\n##############################################################################\n\nresource \"ibm_scc_account_settings\" \"ibm_scc_account_settings_instance\" {\n  location {\n    location_id = \"us\"\n  }\n}\n\nresource \"ibm_scc_posture_collector\" \"collector\" {\n  description = \"scc collector\"\n  is_public   = true\n  managed_by  = \"ibm\"\n  name        = \"${var.prefix}-scc-collector\"\n}\n\nresource \"ibm_scc_posture_scope\" \"scc_scope\" {\n  credential_id   = ibm_scc_posture_credential.scc_credentials.id\n  credential_type = \"ibm\"\n  description     = \"scc scope\"\n  name            = \"${var.prefix}-scc-scope\"\n  collector_ids = [\n    ibm_scc_posture_collector.collector.id\n  ]\n}\n\n##############################################################################\n",
  "event_streams.tf": "##############################################################################\n# Event Streams\n##############################################################################\n\nresource \"ibm_resource_instance\" \"event_streams_es\" {\n  name              = \"${var.prefix}-event-streams\"\n  service           = \"messagehub\"\n  plan              = \"enterprise-3nodes-2tb\"\n  location          = var.region\n  resource_group_id = ibm_resource_group.slz_service_rg.id\n  parameters = {\n    service-endpoints    = \"private\"\n    private_ip_allowlist = \"[10.0.0.0/32,10.0.0.1/32]\"\n    throughput           = \"150\"\n    storage_size         = \"2048\"\n  }\n  timeouts {\n    create = \"3h\"\n    update = \"1h\"\n    delete = \"1h\"\n  }\n}\n\n##############################################################################\n",
  "load_balancers.tf": "##############################################################################\n# Lb 1 Load Balancer\n##############################################################################\n\nresource \"ibm_is_lb\" \"lb_1_load_balancer\" {\n  name           = \"${var.prefix}-lb-1-lb\"\n  type           = \"public\"\n  resource_group = ibm_resource_group.slz_management_rg.id\n  tags = [\n    \"slz\",\n    \"landing-zone\"\n  ]\n  security_groups = [\n    module.management_vpc.management_vpe_sg_id\n  ]\n  subnets = [\n    module.management_vpc.vsi_zone_1_id,\n    module.management_vpc.vsi_zone_2_id,\n    module.management_vpc.vsi_zone_3_id\n  ]\n}\n\nresource \"ibm_is_lb_pool\" \"lb_1_load_balancer_pool\" {\n  lb                                  = ibm_is_lb.lb_1_load_balancer.id\n  name                                = \"${var.prefix}-lb-1-lb-pool\"\n  algorithm                           = \"round_robin\"\n  protocol                            = \"tcp\"\n  health_delay                        = 60\n  health_retries                      = 5\n  health_timeout                      = 30\n  health_type                         = \"https\"\n  proxy_protocol                      = \"v1\"\n  session_persistence_type            = \"app_cookie\"\n  session_persistence_app_cookie_name = \"cookie1\"\n}\n\nresource \"ibm_is_lb_pool_member\" \"lb_1_management_server_management_vpc_management_server_vsi_1_1_pool_member\" {\n  port           = 80\n  lb             = ibm_is_lb.lb_1_load_balancer.id\n  pool           = ibm_is_lb_pool.lb_1_load_balancer_pool.pool_id\n  target_address = ibm_is_instance.management_vpc_management_server_vsi_1_1.primary_network_interface.0.primary_ip.0.address\n}\n\nresource \"ibm_is_lb_pool_member\" \"lb_1_management_server_management_vpc_management_server_vsi_1_2_pool_member\" {\n  port           = 80\n  lb             = ibm_is_lb.lb_1_load_balancer.id\n  pool           = ibm_is_lb_pool.lb_1_load_balancer_pool.pool_id\n  target_address = ibm_is_instance.management_vpc_management_server_vsi_1_2.primary_network_interface.0.primary_ip.0.address\n}\n\nresource \"ibm_is_lb_pool_member\" \"lb_1_management_server_management_vpc_management_server_vsi_2_1_pool_member\" {\n  port           = 80\n  lb             = ibm_is_lb.lb_1_load_balancer.id\n  pool           = ibm_is_lb_pool.lb_1_load_balancer_pool.pool_id\n  target_address = ibm_is_instance.management_vpc_management_server_vsi_2_1.primary_network_interface.0.primary_ip.0.address\n}\n\nresource \"ibm_is_lb_pool_member\" \"lb_1_management_server_management_vpc_management_server_vsi_2_2_pool_member\" {\n  port           = 80\n  lb             = ibm_is_lb.lb_1_load_balancer.id\n  pool           = ibm_is_lb_pool.lb_1_load_balancer_pool.pool_id\n  target_address = ibm_is_instance.management_vpc_management_server_vsi_2_2.primary_network_interface.0.primary_ip.0.address\n}\n\nresource \"ibm_is_lb_pool_member\" \"lb_1_management_server_management_vpc_management_server_vsi_3_1_pool_member\" {\n  port           = 80\n  lb             = ibm_is_lb.lb_1_load_balancer.id\n  pool           = ibm_is_lb_pool.lb_1_load_balancer_pool.pool_id\n  target_address = ibm_is_instance.management_vpc_management_server_vsi_3_1.primary_network_interface.0.primary_ip.0.address\n}\n\nresource \"ibm_is_lb_pool_member\" \"lb_1_management_server_management_vpc_management_server_vsi_3_2_pool_member\" {\n  port           = 80\n  lb             = ibm_is_lb.lb_1_load_balancer.id\n  pool           = ibm_is_lb_pool.lb_1_load_balancer_pool.pool_id\n  target_address = ibm_is_instance.management_vpc_management_server_vsi_3_2.primary_network_interface.0.primary_ip.0.address\n}\n\nresource \"ibm_is_lb_listener\" \"lb_1_listener\" {\n  lb               = ibm_is_lb.lb_1_load_balancer.id\n  default_pool     = ibm_is_lb_pool.lb_1_load_balancer_pool.id\n  port             = 443\n  protocol         = \"https\"\n  connection_limit = 2\n  depends_on = [\n    ibm_is_lb_pool_member.lb_1_management_server_management_vpc_management_server_vsi_1_1_pool_member,\n    ibm_is_lb_pool_member.lb_1_management_server_management_vpc_management_server_vsi_1_2_pool_member,\n    ibm_is_lb_pool_member.lb_1_management_server_management_vpc_management_server_vsi_2_1_pool_member,\n    ibm_is_lb_pool_member.lb_1_management_server_management_vpc_management_server_vsi_2_2_pool_member,\n    ibm_is_lb_pool_member.lb_1_management_server_management_vpc_management_server_vsi_3_1_pool_member,\n    ibm_is_lb_pool_member.lb_1_management_server_management_vpc_management_server_vsi_3_2_pool_member\n  ]\n}\n\n##############################################################################\n",
  "cbr.tf": "##############################################################################\n# Foo Cbr Name Zone\n##############################################################################\n\nresource \"ibm_cbr_zone\" \"slz_foo_cbr_name_zone\" {\n  name        = \"${var.prefix}-zone-foo-cbr-name\"\n  account_id  = \"12ab34cd56ef78ab90cd12ef34ab56cd\"\n  description = \"this is a cbr zone description\"\n  addresses {\n    type  = \"ipAddress\"\n    value = \"169.23.56.234\"\n    ref {\n      account_id       = \"12ab34cd56ef78ab90cd12ef34ab56cd\"\n      location         = var.region\n      service_instance = \"fake-service-instance\"\n      service_name     = \"frog-service-name\"\n      service_type     = \"frog-service\"\n    }\n  }\n  addresses {\n    type  = \"ipRange\"\n    value = \"169.23.22.0-169.23.22.255\"\n    ref {\n      account_id       = \"12ab34cd56ef78ab90cd12ef34ab56cd\"\n      location         = var.region\n      service_instance = \"fake-service-instance\"\n      service_name     = \"frog-service-name\"\n      service_type     = \"frog-service\"\n    }\n  }\n  excluded {\n    type  = \"ipAddress\"\n    value = \"169.23.22.11\"\n  }\n  excluded {\n    type  = \"ipAddress\"\n    value = \"169.23.22.10\"\n  }\n}\n\n##############################################################################\n\n##############################################################################\n# Frog Rule\n##############################################################################\n\nresource \"ibm_cbr_rule\" \"slz_cbr_rule_frog\" {\n  description      = \"test cbr rule description\"\n  enforcement_mode = \"enabled\"\n  contexts {\n    attributes {\n      name  = \"networkZoneId\"\n      value = \"559052eb8f43302824e7ae490c0281eb, bf823d4f45b64ceaa4671bee0479346e\"\n    }\n    attributes {\n      name  = \"endpointType\"\n      value = \"private\"\n    }\n  }\n  resources {\n    tags {\n      name  = \"tag_name\"\n      value = \"tag_value\"\n    }\n    attributes {\n      name  = \"accountId\"\n      value = \"12ab34cd56ef78ab90cd12ef34ab56cd\"\n    }\n    attributes {\n      name  = \"serviceName\"\n      value = \"network-policy-enabled\"\n    }\n  }\n  operations {\n    api_types {\n      api_type_id = \"api_type_id\"\n    }\n  }\n}\n\n##############################################################################\n",
  "dns.tf": "##############################################################################\n# Test DNS Service\n##############################################################################\n\nresource \"ibm_resource_instance\" \"test_dns_instance\" {\n  name              = \"${var.prefix}-test-dns-instance\"\n  resource_group_id = ibm_resource_group.service_rg.id\n  location          = \"global\"\n  service           = \"dns-svcs\"\n  plan              = \"standard-dns\"\n}\n\n##############################################################################\n\n##############################################################################\n# Test DNS Zone Test.com\n##############################################################################\n\nresource \"ibm_dns_zone\" \"test_dns_instance_test_dot_com\" {\n  name        = \"test.com\"\n  instance_id = ibm_resource_instance.test_dns_instance.guid\n  description = \"test description\"\n  label       = \"test\"\n}\n\nresource \"ibm_dns_resource_record\" \"test_dns_instance_test_dot_com_testa\" {\n  instance_id = ibm_resource_instance.test_dns_instance.guid\n  zone_id     = ibm_dns_zone.test_dns_instance_test_dot_com.zone_id\n  type        = \"A\"\n  name        = \"testA\"\n  rdata       = \"test.com\"\n}\n\nresource \"ibm_dns_permitted_network\" \"test_dns_instance_test_dot_com_permitted_network_management\" {\n  instance_id = ibm_resource_instance.test_dns_instance.guid\n  zone_id     = ibm_dns_zone.test_dns_instance_test_dot_com.zone_id\n  vpc_crn     = module.management_vpc.crn\n  type        = \"vpc\"\n}\n\n##############################################################################\n\n##############################################################################\n# Test DNS Custom Resolvers\n##############################################################################\n\nresource \"ibm_dns_custom_resolver\" \"test_dns_instance_resolver_dev_res\" {\n  name              = \"dev-res\"\n  instance_id       = ibm_resource_instance.test_dns_instance.guid\n  description       = \"new resolve\"\n  high_availability = true\n  enabled           = true\n  locations {\n    subnet_crn = module.management_vpc.vsi_zone_1_crn\n    enabled    = true\n  }\n  locations {\n    subnet_crn = module.management_vpc.vsi_zone_2_crn\n    enabled    = true\n  }\n  locations {\n    subnet_crn = module.management_vpc.vsi_zone_3_crn\n    enabled    = true\n  }\n}\n\n##############################################################################\n",
  "craig.json": "{\n  \"_options\": {\n    \"prefix\": \"slz\",\n    \"region\": \"us-south\",\n    \"tags\": [\n      \"slz\",\n      \"landing-zone\"\n    ]\n  },\n  \"resource_groups\": [\n    {\n      \"use_prefix\": true,\n      \"name\": \"slz-service-rg\",\n      \"use_data\": false\n    },\n    {\n      \"use_prefix\": true,\n      \"name\": \"slz-management-rg\",\n      \"use_data\": false\n    },\n    {\n      \"use_prefix\": true,\n      \"name\": \"slz-workload-rg\",\n      \"use_data\": false\n    }\n  ],\n  \"key_management\": [\n    {\n      \"name\": \"slz-kms\",\n      \"resource_group\": \"slz-service-rg\",\n      \"use_hs_crypto\": false,\n      \"authorize_vpc_reader_role\": true,\n      \"use_data\": false,\n      \"keys\": [\n        {\n          \"key_ring\": \"slz-slz-ring\",\n          \"name\": \"slz-slz-key\",\n          \"root_key\": true,\n          \"force_delete\": true,\n          \"endpoint\": \"public\",\n          \"rotation\": 12,\n          \"dual_auth_delete\": false\n        },\n        {\n          \"key_ring\": \"slz-slz-ring\",\n          \"name\": \"slz-atracker-key\",\n          \"root_key\": true,\n          \"force_delete\": true,\n          \"endpoint\": \"public\",\n          \"rotation\": 12,\n          \"dual_auth_delete\": false\n        },\n        {\n          \"key_ring\": \"slz-slz-ring\",\n          \"name\": \"slz-vsi-volume-key\",\n          \"root_key\": true,\n          \"force_delete\": true,\n          \"endpoint\": \"public\",\n          \"rotation\": 12,\n          \"dual_auth_delete\": false\n        }\n      ]\n    }\n  ],\n  \"object_storage\": [\n    {\n      \"buckets\": [\n        {\n          \"endpoint\": \"public\",\n          \"force_delete\": true,\n          \"kms_key\": \"slz-atracker-key\",\n          \"name\": \"atracker-bucket\",\n          \"storage_class\": \"standard\"\n        }\n      ],\n      \"keys\": [\n        {\n          \"name\": \"cos-bind-key\",\n          \"role\": \"Writer\",\n          \"enable_hmac\": false\n        }\n      ],\n      \"name\": \"atracker-cos\",\n      \"plan\": \"standard\",\n      \"resource_group\": \"slz-service-rg\",\n      \"use_data\": false,\n      \"use_random_suffix\": \"false\",\n      \"kms\": \"slz-kms\"\n    },\n    {\n      \"buckets\": [\n        {\n          \"endpoint\": \"public\",\n          \"force_delete\": true,\n          \"kms_key\": \"slz-slz-key\",\n          \"name\": \"management-bucket\",\n          \"storage_class\": \"standard\"\n        },\n        {\n          \"endpoint\": \"public\",\n          \"force_delete\": true,\n          \"kms_key\": \"slz-slz-key\",\n          \"name\": \"workload-bucket\",\n          \"storage_class\": \"standard\"\n        }\n      ],\n      \"keys\": [],\n      \"name\": \"cos\",\n      \"plan\": \"standard\",\n      \"resource_group\": \"slz-service-rg\",\n      \"use_random_suffix\": \"false\",\n      \"kms\": \"slz-kms\"\n    }\n  ],\n  \"secrets_manager\": [],\n  \"atracker\": {\n    \"enabled\": true,\n    \"type\": \"cos\",\n    \"name\": \"slz-atracker\",\n    \"target_name\": \"atracker-cos\",\n    \"bucket\": \"atracker-bucket\",\n    \"add_route\": true,\n    \"cos_key\": \"cos-bind-key\",\n    \"locations\": [\n      \"global\",\n      \"us-south\"\n    ]\n  },\n  \"vpcs\": [\n    {\n      \"cos\": \"cos\",\n      \"bucket\": \"management-bucket\",\n      \"name\": \"management\",\n      \"resource_group\": \"slz-management-rg\",\n      \"classic_access\": false,\n      \"manual_address_prefix_management\": true,\n      \"default_network_acl_name\": null,\n      \"default_security_group_name\": null,\n      \"default_routing_table_name\": null,\n      \"address_prefixes\": [\n        {\n          \"vpc\": \"management\",\n          \"zone\": 1,\n          \"cidr\": \"10.10.10.0/24\",\n          \"name\": \"vsi-zone-1\"\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 2,\n          \"cidr\": \"10.10.20.0/24\",\n          \"name\": \"vsi-zone-2\"\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 3,\n          \"cidr\": \"10.10.30.0/24\",\n          \"name\": \"vsi-zone-3\"\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 1,\n          \"cidr\": \"10.20.10.0/24\",\n          \"name\": \"vpe-zone-1\"\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 2,\n          \"cidr\": \"10.20.20.0/24\",\n          \"name\": \"vpe-zone-2\"\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 3,\n          \"cidr\": \"10.20.30.0/24\",\n          \"name\": \"vpe-zone-3\"\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 1,\n          \"cidr\": \"10.30.10.0/24\",\n          \"name\": \"vpn-zone-1\"\n        }\n      ],\n      \"subnets\": [\n        {\n          \"vpc\": \"management\",\n          \"zone\": 1,\n          \"cidr\": \"10.10.10.0/24\",\n          \"name\": \"vsi-zone-1\",\n          \"network_acl\": \"management\",\n          \"resource_group\": \"slz-management-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 1,\n          \"cidr\": \"10.10.30.0/24\",\n          \"name\": \"vpn-zone-1\",\n          \"network_acl\": \"management\",\n          \"resource_group\": \"slz-management-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 2,\n          \"cidr\": \"10.10.20.0/24\",\n          \"name\": \"vsi-zone-2\",\n          \"network_acl\": \"management\",\n          \"resource_group\": \"slz-management-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 3,\n          \"cidr\": \"10.10.30.0/24\",\n          \"name\": \"vsi-zone-3\",\n          \"network_acl\": \"management\",\n          \"resource_group\": \"slz-management-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 1,\n          \"cidr\": \"10.20.10.0/24\",\n          \"name\": \"vpe-zone-1\",\n          \"resource_group\": \"slz-management-rg\",\n          \"network_acl\": \"management\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 2,\n          \"cidr\": \"10.20.20.0/24\",\n          \"name\": \"vpe-zone-2\",\n          \"network_acl\": \"management\",\n          \"resource_group\": \"slz-management-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        },\n        {\n          \"vpc\": \"management\",\n          \"zone\": 3,\n          \"cidr\": \"10.20.30.0/24\",\n          \"name\": \"vpe-zone-3\",\n          \"network_acl\": \"management\",\n          \"resource_group\": \"slz-management-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        }\n      ],\n      \"public_gateways\": [],\n      \"acls\": [\n        {\n          \"resource_group\": \"slz-management-rg\",\n          \"name\": \"management\",\n          \"vpc\": \"management\",\n          \"rules\": [\n            {\n              \"action\": \"allow\",\n              \"destination\": \"10.0.0.0/8\",\n              \"direction\": \"inbound\",\n              \"name\": \"allow-ibm-inbound\",\n              \"source\": \"161.26.0.0/16\",\n              \"acl\": \"management\",\n              \"vpc\": \"management\",\n              \"icmp\": {\n                \"type\": null,\n                \"code\": null\n              },\n              \"tcp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              },\n              \"udp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              }\n            },\n            {\n              \"action\": \"allow\",\n              \"destination\": \"10.0.0.0/8\",\n              \"direction\": \"inbound\",\n              \"name\": \"allow-all-network-inbound\",\n              \"source\": \"10.0.0.0/8\",\n              \"acl\": \"management\",\n              \"vpc\": \"management\",\n              \"icmp\": {\n                \"type\": null,\n                \"code\": null\n              },\n              \"tcp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              },\n              \"udp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              }\n            },\n            {\n              \"action\": \"allow\",\n              \"destination\": \"0.0.0.0/0\",\n              \"direction\": \"outbound\",\n              \"name\": \"allow-all-outbound\",\n              \"source\": \"0.0.0.0/0\",\n              \"acl\": \"management\",\n              \"vpc\": \"management\",\n              \"icmp\": {\n                \"type\": null,\n                \"code\": null\n              },\n              \"tcp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              },\n              \"udp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              }\n            }\n          ]\n        }\n      ]\n    },\n    {\n      \"cos\": \"cos\",\n      \"bucket\": \"management-bucket\",\n      \"name\": \"workload\",\n      \"resource_group\": \"slz-workload-rg\",\n      \"classic_access\": false,\n      \"manual_address_prefix_management\": true,\n      \"default_network_acl_name\": null,\n      \"default_security_group_name\": null,\n      \"default_routing_table_name\": null,\n      \"address_prefixes\": [\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 1,\n          \"cidr\": \"10.40.10.0/24\",\n          \"name\": \"vsi-zone-1\"\n        },\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 2,\n          \"cidr\": \"10.50.10.0/24\",\n          \"name\": \"vsi-zone-2\"\n        },\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 3,\n          \"cidr\": \"10.60.10.0/24\",\n          \"name\": \"vsi-zone-3\"\n        },\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 1,\n          \"cidr\": \"10.40.20.0/24\",\n          \"name\": \"vpe-zone-1\"\n        },\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 2,\n          \"cidr\": \"10.50.20.0/24\",\n          \"name\": \"vpe-zone-2\"\n        },\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 3,\n          \"cidr\": \"10.60.20.0/24\",\n          \"name\": \"vpe-zone-3\"\n        }\n      ],\n      \"subnets\": [\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 1,\n          \"cidr\": \"10.40.10.0/24\",\n          \"name\": \"vsi-zone-1\",\n          \"network_acl\": \"workload\",\n          \"resource_group\": \"slz-workload-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        },\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 2,\n          \"cidr\": \"10.50.20.0/24\",\n          \"name\": \"vsi-zone-2\",\n          \"network_acl\": \"workload\",\n          \"resource_group\": \"slz-workload-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        },\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 3,\n          \"cidr\": \"10.60.30.0/24\",\n          \"name\": \"vsi-zone-3\",\n          \"network_acl\": \"workload\",\n          \"resource_group\": \"slz-workload-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        },\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 1,\n          \"cidr\": \"10.20.10.0/24\",\n          \"name\": \"vpe-zone-1\",\n          \"network_acl\": \"workload\",\n          \"resource_group\": \"slz-workload-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        },\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 2,\n          \"cidr\": \"10.20.20.0/24\",\n          \"name\": \"vpe-zone-2\",\n          \"network_acl\": \"workload\",\n          \"resource_group\": \"slz-workload-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        },\n        {\n          \"vpc\": \"workload\",\n          \"zone\": 3,\n          \"cidr\": \"10.20.30.0/24\",\n          \"name\": \"vpe-zone-3\",\n          \"network_acl\": \"workload\",\n          \"resource_group\": \"slz-workload-rg\",\n          \"public_gateway\": false,\n          \"has_prefix\": true\n        }\n      ],\n      \"public_gateways\": [],\n      \"acls\": [\n        {\n          \"resource_group\": \"slz-workload-rg\",\n          \"name\": \"workload\",\n          \"vpc\": \"workload\",\n          \"rules\": [\n            {\n              \"action\": \"allow\",\n              \"destination\": \"10.0.0.0/8\",\n              \"direction\": \"inbound\",\n              \"name\": \"allow-ibm-inbound\",\n              \"source\": \"161.26.0.0/16\",\n              \"acl\": \"workload\",\n              \"vpc\": \"workload\",\n              \"icmp\": {\n                \"type\": null,\n                \"code\": null\n              },\n              \"tcp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              },\n              \"udp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              }\n            },\n            {\n              \"action\": \"allow\",\n              \"destination\": \"10.0.0.0/8\",\n              \"direction\": \"inbound\",\n              \"name\": \"allow-all-network-inbound\",\n              \"source\": \"10.0.0.0/8\",\n              \"acl\": \"workload\",\n              \"vpc\": \"workload\",\n              \"icmp\": {\n                \"type\": null,\n                \"code\": null\n              },\n              \"tcp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              },\n              \"udp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              }\n            },\n            {\n              \"action\": \"allow\",\n              \"destination\": \"0.0.0.0/0\",\n              \"direction\": \"outbound\",\n              \"name\": \"allow-all-outbound\",\n              \"source\": \"0.0.0.0/0\",\n              \"acl\": \"workload\",\n              \"vpc\": \"workload\",\n              \"icmp\": {\n                \"type\": null,\n                \"code\": null\n              },\n              \"tcp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              },\n              \"udp\": {\n                \"port_min\": null,\n                \"port_max\": null,\n                \"source_port_min\": null,\n                \"source_port_max\": null\n              }\n            }\n          ]\n        }\n      ]\n    }\n  ],\n  \"virtual_private_endpoints\": [\n    {\n      \"vpc\": \"management\",\n      \"service\": \"cos\",\n      \"resource_group\": \"slz-management-rg\",\n      \"security_groups\": [\n        \"management-vpe-sg\"\n      ],\n      \"subnets\": [\n        \"vpe-zone-1\",\n        \"vpe-zone-2\",\n        \"vpe-zone-3\"\n      ]\n    },\n    {\n      \"vpc\": \"workload\",\n      \"service\": \"cos\",\n      \"resource_group\": \"slz-workload-rg\",\n      \"security_groups\": [\n        \"workload-vpe-sg\"\n      ],\n      \"subnets\": [\n        \"vpe-zone-1\",\n        \"vpe-zone-2\",\n        \"vpe-zone-3\"\n      ]\n    }\n  ],\n  \"security_groups\": [\n    {\n      \"vpc\": \"management\",\n      \"name\": \"management-vpe-sg\",\n      \"resource_group\": \"slz-management-rg\",\n      \"rules\": [\n        {\n          \"vpc\": \"management\",\n          \"sg\": \"management-vpe-sg\",\n          \"direction\": \"inbound\",\n          \"name\": \"allow-ibm-inbound\",\n          \"source\": \"161.26.0.0/16\",\n          \"tcp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        },\n        {\n          \"vpc\": \"management\",\n          \"sg\": \"management-vpe-sg\",\n          \"direction\": \"inbound\",\n          \"name\": \"allow-vpc-inbound\",\n          \"source\": \"10.0.0.0/8\",\n          \"tcp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        },\n        {\n          \"vpc\": \"management\",\n          \"sg\": \"management-vpe-sg\",\n          \"direction\": \"outbound\",\n          \"name\": \"allow-vpc-outbound\",\n          \"source\": \"10.0.0.0/8\",\n          \"tcp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        },\n        {\n          \"vpc\": \"management\",\n          \"sg\": \"management-vpe-sg\",\n          \"direction\": \"outbound\",\n          \"name\": \"allow-ibm-tcp-53-outbound\",\n          \"source\": \"161.26.0.0/16\",\n          \"tcp\": {\n            \"port_max\": 53,\n            \"port_min\": 53\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        },\n        {\n          \"vpc\": \"management\",\n          \"sg\": \"management-vpe-sg\",\n          \"direction\": \"outbound\",\n          \"name\": \"allow-ibm-tcp-80-outbound\",\n          \"source\": \"161.26.0.0/16\",\n          \"tcp\": {\n            \"port_max\": 80,\n            \"port_min\": 80\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        },\n        {\n          \"vpc\": \"management\",\n          \"sg\": \"management-vpe-sg\",\n          \"direction\": \"outbound\",\n          \"name\": \"allow-ibm-tcp-443-outbound\",\n          \"source\": \"161.26.0.0/16\",\n          \"tcp\": {\n            \"port_max\": 443,\n            \"port_min\": 443\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        }\n      ]\n    },\n    {\n      \"vpc\": \"workload\",\n      \"name\": \"workload-vpe-sg\",\n      \"resource_group\": \"slz-workload-rg\",\n      \"rules\": [\n        {\n          \"vpc\": \"workload\",\n          \"sg\": \"workload-vpe-sg\",\n          \"direction\": \"inbound\",\n          \"name\": \"allow-ibm-inbound\",\n          \"source\": \"161.26.0.0/16\",\n          \"tcp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        },\n        {\n          \"vpc\": \"workload\",\n          \"sg\": \"workload-vpe-sg\",\n          \"direction\": \"inbound\",\n          \"name\": \"allow-vpc-inbound\",\n          \"source\": \"10.0.0.0/8\",\n          \"tcp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        },\n        {\n          \"vpc\": \"workload\",\n          \"sg\": \"workload-vpe-sg\",\n          \"direction\": \"outbound\",\n          \"name\": \"allow-vpc-outbound\",\n          \"source\": \"10.0.0.0/8\",\n          \"tcp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        },\n        {\n          \"vpc\": \"workload\",\n          \"sg\": \"workload-vpe-sg\",\n          \"direction\": \"outbound\",\n          \"name\": \"allow-ibm-tcp-53-outbound\",\n          \"source\": \"161.26.0.0/16\",\n          \"tcp\": {\n            \"port_max\": 53,\n            \"port_min\": 53\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        },\n        {\n          \"vpc\": \"workload\",\n          \"sg\": \"workload-vpe-sg\",\n          \"direction\": \"outbound\",\n          \"name\": \"allow-ibm-tcp-80-outbound\",\n          \"source\": \"161.26.0.0/16\",\n          \"tcp\": {\n            \"port_max\": 80,\n            \"port_min\": 80\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        },\n        {\n          \"vpc\": \"workload\",\n          \"sg\": \"workload-vpe-sg\",\n          \"direction\": \"outbound\",\n          \"name\": \"allow-ibm-tcp-443-outbound\",\n          \"source\": \"161.26.0.0/16\",\n          \"tcp\": {\n            \"port_max\": 443,\n            \"port_min\": 443\n          },\n          \"udp\": {\n            \"port_max\": null,\n            \"port_min\": null\n          },\n          \"icmp\": {\n            \"type\": null,\n            \"code\": null\n          }\n        }\n      ]\n    }\n  ],\n  \"vpn_gateways\": [\n    {\n      \"name\": \"management-gateway\",\n      \"resource_group\": \"slz-management-rg\",\n      \"subnet\": \"vpn-zone-1\",\n      \"vpc\": \"management\"\n    }\n  ],\n  \"ssh_keys\": [\n    {\n      \"name\": \"slz-ssh-key\",\n      \"public_key\": \"public-key\",\n      \"resource_group\": \"slz-management-rg\",\n      \"use_data\": false\n    }\n  ],\n  \"transit_gateways\": [\n    {\n      \"name\": \"transit-gateway\",\n      \"resource_group\": \"slz-service-rg\",\n      \"global\": false,\n      \"connections\": [\n        {\n          \"tgw\": \"transit-gateway\",\n          \"vpc\": \"management\"\n        },\n        {\n          \"tgw\": \"transit-gateway\",\n          \"vpc\": \"workload\"\n        }\n      ]\n    }\n  ],\n  \"clusters\": [\n    {\n      \"kms\": \"slz-kms\",\n      \"cos\": \"cos\",\n      \"entitlement\": \"cloud_pak\",\n      \"type\": \"openshift\",\n      \"kube_version\": \"default\",\n      \"flavor\": \"bx2.16x64\",\n      \"name\": \"workload\",\n      \"resource_group\": \"slz-workload-rg\",\n      \"encryption_key\": \"slz-vsi-volume-key\",\n      \"subnets\": [\n        \"vsi-zone-1\",\n        \"vsi-zone-2\",\n        \"vsi-zone-3\"\n      ],\n      \"update_all_workers\": false,\n      \"vpc\": \"workload\",\n      \"worker_pools\": [\n        {\n          \"entitlement\": \"cloud_pak\",\n          \"cluster\": \"workload\",\n          \"flavor\": \"bx2.16x64\",\n          \"name\": \"logging-pool\",\n          \"resource_group\": \"slz-workload-rg\",\n          \"subnets\": [\n            \"vsi-zone-1\",\n            \"vsi-zone-2\",\n            \"vsi-zone-3\"\n          ],\n          \"vpc\": \"workload\",\n          \"workers_per_subnet\": 2\n        }\n      ],\n      \"workers_per_subnet\": 2,\n      \"private_endpoint\": false\n    }\n  ],\n  \"vsi\": [\n    {\n      \"kms\": \"slz-kms\",\n      \"encryption_key\": \"slz-vsi-volume-key\",\n      \"image\": \"ibm-ubuntu-18-04-6-minimal-amd64-2\",\n      \"profile\": \"cx2-4x8\",\n      \"name\": \"management-server\",\n      \"security_groups\": [\n        \"management-vpe-sg\"\n      ],\n      \"ssh_keys\": [\n        \"slz-ssh-key\"\n      ],\n      \"subnets\": [\n        \"vsi-zone-1\",\n        \"vsi-zone-2\",\n        \"vsi-zone-3\"\n      ],\n      \"vpc\": \"management\",\n      \"vsi_per_subnet\": 2,\n      \"resource_group\": \"slz-management-rg\"\n    }\n  ],\n  \"appid\": [],\n  \"teleport_vsi\": [],\n  \"scc\": {\n    \"name\": \"\"\n  },\n  \"event_streams\": [],\n  \"load_balancers\": [],\n  \"cbr_zones\": [],\n  \"cbr_rules\": []\n}"
}
